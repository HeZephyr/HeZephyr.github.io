<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Shell - 标签 | ZephyrHe</title><link>https://hezephyr.github.io/tags/shell/</link><description>Shell - 标签 | ZephyrHe</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>unique.hzf@gmail.com (HeZephyr)</managingEditor><webMaster>unique.hzf@gmail.com (HeZephyr)</webMaster><copyright>本站内容采用 CC BY-NC-SA 4.0 国际许可协议。</copyright><lastBuildDate>Sun, 09 Jun 2024 09:39:47 +0000</lastBuildDate><atom:link href="https://hezephyr.github.io/tags/shell/" rel="self" type="application/rss+xml"/><item><title>Shell 23道例题实战</title><link>https://hezephyr.github.io/posts/07.shell%E5%AE%9E%E6%88%98/</link><pubDate>Sun, 09 Jun 2024 09:39:47 +0000</pubDate><author>HeZephyr</author><guid>https://hezephyr.github.io/posts/07.shell%E5%AE%9E%E6%88%98/</guid><description><![CDATA[<h2 id="统计文件的行数" class="heading-element"><span>1 统计文件的行数</span>
  <a href="#%e7%bb%9f%e8%ae%a1%e6%96%87%e4%bb%b6%e7%9a%84%e8%a1%8c%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>编写一个<code>shell</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中的行数</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 方法1：使用 wc -l 和 awk</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 统计行数并使用 awk 提取第一个字段，即行数</span>
</span></span><span class="line"><span class="cl"><span class="nv">lines</span><span class="o">=</span><span class="k">$(</span>wc -l nowcoder.txt <span class="p">|</span> awk <span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;使用 wc -l 和 awk：</span><span class="nv">$lines</span><span class="s2"> 行&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法2：通过输入流传递文件内容给 wc -l</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 &lt; 操作符</span>
</span></span><span class="line"><span class="cl"><span class="nv">lines</span><span class="o">=</span><span class="k">$(</span>wc -l &lt; nowcoder.txt<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;通过输入流：</span><span class="nv">$lines</span><span class="s2"> 行&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法3：使用 cat 和管道传递给 wc -l</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 cat 命令和管道</span>
</span></span><span class="line"><span class="cl"><span class="nv">lines</span><span class="o">=</span><span class="k">$(</span>cat nowcoder.txt <span class="p">|</span> wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;通过管道：</span><span class="nv">$lines</span><span class="s2"> 行&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法4：使用 sed 统计行数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 sed 的 -n &#39;$=&#39; 选项</span>
</span></span><span class="line"><span class="cl"><span class="nv">lines</span><span class="o">=</span><span class="k">$(</span>sed -n <span class="s1">&#39;$=&#39;</span> nowcoder.txt<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;使用 sed：</span><span class="nv">$lines</span><span class="s2"> 行&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="打印文件的最后5行" class="heading-element"><span>2 打印文件的最后5行</span>
  <a href="#%e6%89%93%e5%8d%b0%e6%96%87%e4%bb%b6%e7%9a%84%e6%9c%80%e5%90%8e5%e8%a1%8c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>查看日志的时候，经常会从文件的末尾往前查看，请你写一个<code>bash shell</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中的最后5行。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 查看文件的前5行</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;前5行：&#34;</span>
</span></span><span class="line"><span class="cl">head -5 nowcoder.txt
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看文件的后5行</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;后5行：&#34;</span>
</span></span><span class="line"><span class="cl">tail -5 nowcoder.txt
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查看文件的第5行到第20行</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;第5行到第20行：&#34;</span>
</span></span><span class="line"><span class="cl">sed -n <span class="s1">&#39;5,20p&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="输出-0-到-500-中-7-的倍数" class="heading-element"><span>3 输出 0 到 500 中 7 的倍数</span>
  <a href="#%e8%be%93%e5%87%ba-0-%e5%88%b0-500-%e4%b8%ad-7-%e7%9a%84%e5%80%8d%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个 <code>bash</code>脚本以输出数字 $0$ 到 $500$ 中 $7$ 的倍数$(0 7 14 21&hellip;)$的命令</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 方法1：使用 Bash 的扩展语法的 for 循环</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;方法1：使用 Bash 的扩展语法的 for 循环&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> item in <span class="o">{</span>0..500..7<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span> 
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$item</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="c1"># 分隔行</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法2：使用 seq 命令 </span>
</span></span><span class="line"><span class="cl"><span class="c1"># seq [选项]... 首部 增量 尾部</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;方法2：使用 seq 命令&#34;</span>
</span></span><span class="line"><span class="cl">seq <span class="m">0</span> <span class="m">7</span> <span class="m">500</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="c1"># 分隔行</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 方法3：使用 while 循环</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;方法3：使用 while 循环&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 初始化变量</span>
</span></span><span class="line"><span class="cl"><span class="nv">i</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 while 循环</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="o">[</span> <span class="nv">$i</span> -le <span class="m">500</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 输出当前的 7 的倍数</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># 增加 7</span>
</span></span><span class="line"><span class="cl">    <span class="nv">i</span><span class="o">=</span><span class="k">$((</span>i <span class="o">+</span> <span class="m">7</span><span class="k">))</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="输出第5行的内容" class="heading-element"><span>4 输出第5行的内容</span>
  <a href="#%e8%be%93%e5%87%ba%e7%ac%ac5%e8%a1%8c%e7%9a%84%e5%86%85%e5%ae%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>编写一个<code>bash</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中第$5$行的内容。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># head 命令拿到前五行，再通过通道，通过tail取出来最后一行，即第五行</span>
</span></span><span class="line"><span class="cl">head -n <span class="m">5</span> nowcoder.txt <span class="p">|</span> tail -n <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用sed 命令中的 p选项，打印第五行</span>
</span></span><span class="line"><span class="cl">sed -n 5p nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="打印空行的行号" class="heading-element"><span>5 打印空行的行号</span>
  <a href="#%e6%89%93%e5%8d%b0%e7%a9%ba%e8%a1%8c%e7%9a%84%e8%a1%8c%e5%8f%b7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>编写一个<code>shell</code>脚本以输出一个文本文件<code>nowcoder.txt</code>中空行的行号（空行可能连续，从1开始输出）</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 grep 命令匹配所有空行，并且输出匹配的行号。-n 选项表示输出匹配行的行号，&#39;^$&#39; 匹配空行。使用 cut 命令以 : 作为分隔符，提取每行的第一个字段，即行号。</span>
</span></span><span class="line"><span class="cl">grep -n <span class="s1">&#39;^$&#39;</span> nowcoder.txt <span class="p">|</span> cut -d<span class="s1">&#39;:&#39;</span> -f1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 awk 命令，NF 表示当前行的字段数，NR 表示当前行号。当字段数为0时，即当前行为空行，{ print NR } 输出当前行的行号。</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;NF == 0 { print NR }&#39;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 sed 命令匹配所有空行，并输出匹配行的行号。-n 选项表示只输出指定的行，/^$/ 匹配空行，=表示输出匹配行的行号。</span>
</span></span><span class="line"><span class="cl">sed -n <span class="s1">&#39;/^$/=&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="去掉空行" class="heading-element"><span>6 去掉空行</span>
  <a href="#%e5%8e%bb%e6%8e%89%e7%a9%ba%e8%a1%8c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个 <code>bash</code>脚本以去掉一个文本文件<code>nowcoder.txt</code>中的空行</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 grep 命令匹配所有非空行。-v 选项表示反转匹配，&#39;^$&#39; 匹配空行。</span>
</span></span><span class="line"><span class="cl">grep -v <span class="s1">&#39;^$&#39;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 sed 命令删除匹配空行的行。/^$/ 匹配空行，d 命令删除匹配的行</span>
</span></span><span class="line"><span class="cl">sed <span class="s1">&#39;/^$/d&#39;</span> nowcoder.txt &gt; nowcoder_no_empty_lines.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 awk 命令，NF 表示字段数，NF 为真时表示非空行。</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;NF&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="打印字母数小于8的单词" class="heading-element"><span>7 打印字母数小于8的单词</span>
  <a href="#%e6%89%93%e5%8d%b0%e5%ad%97%e6%af%8d%e6%95%b0%e5%b0%8f%e4%ba%8e8%e7%9a%84%e5%8d%95%e8%af%8d" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个<code>bash</code>脚本以统计一个文本文件<code>nowcoder.txt</code>中字母数小于8的单词。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 awk 命令遍历每个单词，NF 表示当前行的单词数，length($i) 表示当前单词的字母数，如果字母数小于8，则打印当前单词。</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ for (i=1; i&lt;=NF; i++) if (length($i)&lt;8) print $i }&#39;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 grep 命令匹配字母数小于8的单词。-o 选项表示只输出匹配的内容，\b 表示单词边界，\w\{1,7\} 匹配字母数在1到7之间的单词。</span>
</span></span><span class="line"><span class="cl">grep -o <span class="s1">&#39;\b\w\{1,7\}\b&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="统计所有进程占用内存百分比的和" class="heading-element"><span>8 统计所有进程占用内存百分比的和</span>
  <a href="#%e7%bb%9f%e8%ae%a1%e6%89%80%e6%9c%89%e8%bf%9b%e7%a8%8b%e5%8d%a0%e7%94%a8%e5%86%85%e5%ad%98%e7%99%be%e5%88%86%e6%af%94%e7%9a%84%e5%92%8c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设 <code>nowcoder.txt</code> 内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">USER</span>       <span class="n">PID</span> <span class="o">%</span><span class="n">CPU</span> <span class="o">%</span><span class="n">MEM</span>    <span class="n">VSZ</span>   <span class="n">RSS</span> <span class="n">TTY</span>      <span class="n">STAT</span> <span class="n">START</span>   <span class="n">TIME</span> <span class="n">COMMAND</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>         <span class="mi">1</span>  <span class="mf">0.0</span>  <span class="mf">0.4</span>  <span class="mi">77744</span>  <span class="mi">8332</span> <span class="o">?</span>        <span class="n">Ss</span>    <span class="mi">2021</span>   <span class="mi">1</span><span class="o">:</span><span class="mi">15</span> <span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">init</span> <span class="n">noibrs</span> <span class="n">splash</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>         <span class="mi">2</span>  <span class="mf">0.0</span>  <span class="mf">0.0</span>      <span class="mi">0</span>     <span class="mi">0</span> <span class="o">?</span>        <span class="n">S</span>     <span class="mi">2021</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">00</span> <span class="p">[</span><span class="n">kthreadd</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>         <span class="mi">4</span>  <span class="mf">0.0</span>  <span class="mf">0.0</span>      <span class="mi">0</span>     <span class="mi">0</span> <span class="o">?</span>        <span class="n">I</span><span class="o">&lt;</span>    <span class="mi">2021</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">00</span> <span class="p">[</span><span class="n">kworker</span><span class="o">/</span><span class="mi">0</span><span class="o">:</span><span class="mi">0</span><span class="n">H</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">daemon</span>     <span class="mi">486</span>  <span class="mf">0.0</span>  <span class="mf">0.1</span>  <span class="mi">28340</span>  <span class="mi">2372</span> <span class="o">?</span>        <span class="n">Ss</span>    <span class="mi">2021</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">00</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">atd</span> <span class="o">-</span><span class="n">f</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>       <span class="mi">586</span>  <span class="mf">0.0</span>  <span class="mf">0.3</span>  <span class="mi">72308</span>  <span class="mi">6244</span> <span class="o">?</span>        <span class="n">Ss</span>    <span class="mi">2021</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">01</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">sshd</span> <span class="o">-</span><span class="n">D</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>     <span class="mi">12847</span>  <span class="mf">0.0</span>  <span class="mf">0.0</span>   <span class="mi">4528</span>    <span class="mi">68</span> <span class="o">?</span>        <span class="n">S</span><span class="o">&lt;</span>   <span class="n">Jan03</span>   <span class="mi">0</span><span class="o">:</span><span class="mi">13</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">atopacctd</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>     <span class="mi">16306</span>  <span class="mf">1.7</span>  <span class="mf">1.2</span> <span class="mi">151964</span> <span class="mi">26132</span> <span class="o">?</span>        <span class="n">S</span><span class="o">&lt;</span><span class="n">sl</span> <span class="n">Apr15</span> <span class="mi">512</span><span class="o">:</span><span class="mo">03</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">aegis</span><span class="o">/</span><span class="n">aegis_client</span><span class="o">/</span><span class="n">aegis_11_25</span><span class="o">/</span><span class="n">AliYunDun</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>     <span class="mi">24143</span>  <span class="mf">0.0</span>  <span class="mf">0.4</span>  <span class="mi">25608</span>  <span class="mi">8652</span> <span class="o">?</span>        <span class="n">S</span><span class="o">&lt;</span><span class="n">Ls</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">03</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">atop</span> <span class="o">-</span><span class="n">R</span> <span class="o">-</span><span class="n">w</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">atop</span><span class="o">/</span><span class="n">atop_20220505</span> <span class="mi">600</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>     <span class="mi">24901</span>  <span class="mf">0.0</span>  <span class="mf">0.3</span> <span class="mi">107792</span>  <span class="mi">7008</span> <span class="o">?</span>        <span class="n">Ss</span>   <span class="mi">15</span><span class="o">:</span><span class="mi">37</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">00</span> <span class="nl">sshd</span><span class="p">:</span> <span class="n">root</span><span class="err">@</span><span class="n">pts</span><span class="o">/</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>     <span class="mi">24903</span>  <span class="mf">0.0</span>  <span class="mf">0.3</span>  <span class="mi">76532</span>  <span class="mi">7580</span> <span class="o">?</span>        <span class="n">Ss</span>   <span class="mi">15</span><span class="o">:</span><span class="mi">37</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">00</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">systemd</span> <span class="o">--</span><span class="n">user</span>
</span></span><span class="line"><span class="cl"><span class="n">root</span>     <span class="mi">24904</span>  <span class="mf">0.0</span>  <span class="mf">0.1</span> <span class="mi">111520</span>  <span class="mi">2392</span> <span class="o">?</span>        <span class="n">S</span>    <span class="mi">15</span><span class="o">:</span><span class="mi">37</span>   <span class="mi">0</span><span class="o">:</span><span class="mo">00</span> <span class="p">(</span><span class="n">sd</span><span class="o">-</span><span class="n">pam</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>以上内容是通过<code>ps aux</code>命令输出到<code>nowcoder.txt</code>文件中的，请你写一个脚本计算一下所有进程占用内存大小的和。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用awk命令过滤到第一行并累加$4</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;BEGIN { sum=0 } NR &gt; 1 { sum+=$4 } END { print sum }&#39;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用while循环读取，并用if跳过第一行，使用bc进行浮点数加法运算</span>
</span></span><span class="line"><span class="cl"><span class="nv">sum</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="nv">cnt</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="nb">read</span> -r line<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="nv">$cnt</span> -gt <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nv">mem</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$line</span> <span class="p">|</span> awk <span class="s1">&#39;{ print $4 }&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">sum</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$sum</span><span class="s2">+</span><span class="nv">$mem</span><span class="s2">&#34;</span> <span class="p">|</span> bc<span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="nv">cnt</span><span class="o">=</span><span class="k">$((</span>cnt+1<span class="k">))</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$sum</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">sum</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">tail -n +2 nowcoder.txt <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> -r line<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nv">mem</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$line</span> <span class="p">|</span> awk <span class="s1">&#39;{ print $4 }&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">sum</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$sum</span><span class="s2">+</span><span class="nv">$mem</span><span class="s2">&#34;</span> <span class="p">|</span> bc<span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$sum</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$sum</span></span></span></code></pre></td></tr></table>
</div>
</div><p>在 <code>Bash</code> 中，<font color="red">管道中的命令会在子 shell 中执行，因此变量修改不会影响主 shell 中的变量</font>。这就是为什么看到 <code>sum</code> 在循环内部被正确更新，但在循环外部仍然是初始值 <code>0</code>。</p>
</blockquote>
<h2 id="统计每个单词出现的个数" class="heading-element"><span>9 统计每个单词出现的个数</span>
  <a href="#%e7%bb%9f%e8%ae%a1%e6%af%8f%e4%b8%aa%e5%8d%95%e8%af%8d%e5%87%ba%e7%8e%b0%e7%9a%84%e4%b8%aa%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个<code>bash</code>脚本以统计一个文本文件<code>nowcoder.txt</code> 中每个单词出现的个数。</p>
<p>为了简单起见，你可以假设：
<code>nowcoder.txt</code>只包括小写字母和空格，每个单词只由小写字母组成，单词间由一个或多个空格字符分隔。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 将空格转换为换行符，以便每个单词占一行</span>
</span></span><span class="line"><span class="cl">tr -s <span class="s1">&#39; &#39;</span> <span class="s1">&#39;\n&#39;</span> &lt;nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># 对单词进行排序</span>
</span></span><span class="line"><span class="cl">	sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># 统计每个单词的出现次数</span>
</span></span><span class="line"><span class="cl">	uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># 调整输出格式为&#34;单词 词频&#34;</span>
</span></span><span class="line"><span class="cl">	awk <span class="s1">&#39;{ print $2, $1 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># 按词频升序排序，-k2,2 意味着只使用第二列进行排序，表示按数值进行排序（默认情况按字典序排序）</span>
</span></span><span class="line"><span class="cl">	sort -k2,2n 
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 awk 统计每个单词的出现次数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># NF 表示当前行的字段数，即单词数</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用一个关联数组 cnt 存储每个单词出现的次数</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i=1; i&lt;=NF; i++)  # 遍历当前行的每个单词
</span></span></span><span class="line"><span class="cl"><span class="s1">        cnt[$i] += 1        # 将单词加入关联数组 cnt，统计出现次数
</span></span></span><span class="line"><span class="cl"><span class="s1">}
</span></span></span><span class="line"><span class="cl"><span class="s1">END {
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (x in cnt)           # 遍历关联数组 cnt
</span></span></span><span class="line"><span class="cl"><span class="s1">        print x, cnt[x]       # 输出单词和对应的出现次数
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt <span class="p">|</span> sort -k2,2n</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="第二列是否有重复" class="heading-element"><span>10 第二列是否有重复</span>
  <a href="#%e7%ac%ac%e4%ba%8c%e5%88%97%e6%98%af%e5%90%a6%e6%9c%89%e9%87%8d%e5%a4%8d" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>给定一个<code>nowcoder.txt</code>文件，其中有3列信息，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">20201001 python 99
</span></span><span class="line"><span class="cl">20201002 go 80
</span></span><span class="line"><span class="cl">20201002 c++ 88
</span></span><span class="line"><span class="cl">20201003 php 77
</span></span><span class="line"><span class="cl">20201001 go 88
</span></span><span class="line"><span class="cl">20201005 shell 89
</span></span><span class="line"><span class="cl">20201006 java 70
</span></span><span class="line"><span class="cl">20201008 c 100
</span></span><span class="line"><span class="cl">20201007 java 88
</span></span><span class="line"><span class="cl">20201006 go 97</span></span></code></pre></td></tr></table>
</div>
</div><p>编写一个<code>shell</code>脚本来检查文件第二列是否有重复，且有几个重复，并提取出重复的行的第二列信息（先按次数排序，如果次数相同，按照单词字母顺序排序），输入如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">2 java
</span></span><span class="line"><span class="cl">3 go</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">cat nowcoder.txt <span class="p">|</span> 
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $2 }&#39;</span> <span class="p">|</span> 
</span></span><span class="line"><span class="cl">sort <span class="p">|</span> uniq -c <span class="p">|</span> 
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1, $2 }&#39;</span> <span class="p">|</span> <span class="c1"># 重新格式化输出</span>
</span></span><span class="line"><span class="cl">sort -k1,1n -k2,2 <span class="p">|</span> <span class="c1"># 按照出现次数和字母顺序排序</span>
</span></span><span class="line"><span class="cl">grep -v <span class="s1">&#39;1&#39;</span>	<span class="c1"># 过滤出现次数不为 1 的行</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="转置文件的内容" class="heading-element"><span>11 转置文件的内容</span>
  <a href="#%e8%bd%ac%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e5%86%85%e5%ae%b9" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个<code>bash</code>脚本来转置文本文件<code>nowcoder.txt</code>中的文件内容。
文件中每行列数相同，并且每个字段由空格分隔</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 读取文件并使用 awk 转置文件内容</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">{
</span></span></span><span class="line"><span class="cl"><span class="s1">    # 遍历当前行的每一个字段
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i = 1; i &lt;= NF; i++) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        a[NR, i] = $i  # 将每个字段存储在一个二维数组中，a[行号, 列号] = 值
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">}
</span></span></span><span class="line"><span class="cl"><span class="s1">NF &gt; p { p = NF }  # 如果当前行的字段数大于 p，则更新 p 为当前行的字段数
</span></span></span><span class="line"><span class="cl"><span class="s1">
</span></span></span><span class="line"><span class="cl"><span class="s1">END {
</span></span></span><span class="line"><span class="cl"><span class="s1">    # 遍历每一列（由最大字段数 p 确定）
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i = 1; i &lt;= p; i++) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        # 遍历每一行（由总行数 NR 确定）
</span></span></span><span class="line"><span class="cl"><span class="s1">        for (j = 1; j &lt;= NR; j++) {
</span></span></span><span class="line"><span class="cl"><span class="s1">            printf(&#34;%s%s&#34;, a[j,i], (j==NR ? &#34;&#34; : &#34; &#34;))  # 输出数组中对应的字段值，并在每个字段后添加空格，除非是最后一个字段
</span></span></span><span class="line"><span class="cl"><span class="s1">        }
</span></span></span><span class="line"><span class="cl"><span class="s1">        printf(&#34;\n&#34;)  # 每一列输出完之后换行
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="打印每一行出现的数字个数" class="heading-element"><span>12 打印每一行出现的数字个数</span>
  <a href="#%e6%89%93%e5%8d%b0%e6%af%8f%e4%b8%80%e8%a1%8c%e5%87%ba%e7%8e%b0%e7%9a%84%e6%95%b0%e5%ad%97%e4%b8%aa%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个<code>bash</code>脚本，统计一个文本文件<code>nowcoder.txt</code>中每一行出现的<code>1~5</code>数字的个数，并且计算一下整个文档中一共出现了几个<code>1~5</code>数字的总数。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 awk 读取文件并统计每行中包含的特定数字（1, 2, 3, 4, 5）的数量</span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;[1,2,3,4,5]&#34;</span> <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">BEGIN { 
</span></span></span><span class="line"><span class="cl"><span class="s1">    sum = 0  # 初始化 sum 变量，用于存储总和
</span></span></span><span class="line"><span class="cl"><span class="s1">} {
</span></span></span><span class="line"><span class="cl"><span class="s1">    # 打印当前行号 NR 以及当前行中包含的特定数字的数量 (NF - 1)
</span></span></span><span class="line"><span class="cl"><span class="s1">    print(&#34;line&#34; NR &#34; number: &#34; (NF - 1))
</span></span></span><span class="line"><span class="cl"><span class="s1">    
</span></span></span><span class="line"><span class="cl"><span class="s1">    # 将当前行中包含的特定数字的数量累加到 sum
</span></span></span><span class="line"><span class="cl"><span class="s1">    sum += (NF - 1)
</span></span></span><span class="line"><span class="cl"><span class="s1">} END {
</span></span></span><span class="line"><span class="cl"><span class="s1">    # 打印总和
</span></span></span><span class="line"><span class="cl"><span class="s1">    print(&#34;sum is &#34; sum)
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="去掉所有包含this的句子" class="heading-element"><span>13 去掉所有包含this的句子</span>
  <a href="#%e5%8e%bb%e6%8e%89%e6%89%80%e6%9c%89%e5%8c%85%e5%90%abthis%e7%9a%84%e5%8f%a5%e5%ad%90" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>编写一个<code>shell</code>脚本以实现如下功能：去掉输入中含有<code>this</code>的语句，把不含<code>this</code>的语句输出</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># -v 反转匹配</span>
</span></span><span class="line"><span class="cl">grep -v <span class="s2">&#34;this&#34;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># sed 命令 -&gt; d 删除 -&gt; // 包含要搜索的字符串</span>
</span></span><span class="line"><span class="cl">sed <span class="s1">&#39;/this/d&#39;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># awk 命令，$0为当前行的所有内容，!~ 是 awk 的模式匹配运算符，表示模式不匹配</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;$0!~/this/ {print $0}&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="求平均值" class="heading-element"><span>14 求平均值</span>
  <a href="#%e6%b1%82%e5%b9%b3%e5%9d%87%e5%80%bc" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个<code>bash</code>脚本以实现一个需求，求输入的一个数组的平均值</p>
<p>第<code>1</code>行为输入的数组长度<code>N</code></p>
<p>第<code>2~N</code>行为数组的元素，如以下为:
数组长度为<code>4</code>，数组元素为<code>1 2 9 8</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;BEGIN {
</span></span></span><span class="line"><span class="cl"><span class="s1">    sum = 0
</span></span></span><span class="line"><span class="cl"><span class="s1">}{
</span></span></span><span class="line"><span class="cl"><span class="s1">    if (NR == 1) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        N = $1  # 将第一行的数字数量保存到变量 N 中
</span></span></span><span class="line"><span class="cl"><span class="s1">    } else {
</span></span></span><span class="line"><span class="cl"><span class="s1">        sum += $1  # 对随后的数字进行累加求和
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">} END {
</span></span></span><span class="line"><span class="cl"><span class="s1">    printf(&#34;%.3f&#34;, sum / N)  # 输出平均值，保留三位小数
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="去掉不需要的单词" class="heading-element"><span>15 去掉不需要的单词</span>
  <a href="#%e5%8e%bb%e6%8e%89%e4%b8%8d%e9%9c%80%e8%a6%81%e7%9a%84%e5%8d%95%e8%af%8d" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个<code>bash</code>脚本以实现一个需求，去掉输入中含有<code>B</code>和<code>b</code>的单词。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 sed -n 命令打印不包含 &#39;B&#39; 和 &#39;b&#39; 的行</span>
</span></span><span class="line"><span class="cl"><span class="c1"># /^[^bB]*$/ 表示匹配不包含 &#39;B&#39; 和 &#39;b&#39; 的行，^ 表示行开头，[^bB] 表示不包含 &#39;B&#39; 和 &#39;b&#39; 的任何字符，* 表示零次或多次重复，$ 表示行结尾</span>
</span></span><span class="line"><span class="cl">sed -n <span class="s1">&#39;/^[^bB]*$/p&#39;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 grep -E -v 命令排除包含 &#39;B&#39; 和 &#39;b&#39; 的行</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -E 选项启用扩展的正则表达式，-v 选项表示反转匹配</span>
</span></span><span class="line"><span class="cl">grep -E -v <span class="s2">&#34;[bB]&#34;</span> nowcoder.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 awk 命令，遍历每个单词，如果不包含 &#39;B&#39; 和 &#39;b&#39;，则输出该单词</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i = 1;i &lt;= NF; i++) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        if ($i !~ /b|B/) {  # 使用正则表达式匹配单词中不包含 &#39;</span>B<span class="s1">&#39; 和 &#39;</span>b<span class="s1">&#39; 的部分
</span></span></span><span class="line"><span class="cl"><span class="s1">            printf(&#34;%s &#34;, $i)  # 输出不包含 &#39;</span>B<span class="s1">&#39; 和 &#39;</span>b<span class="s1">&#39; 的单词
</span></span></span><span class="line"><span class="cl"><span class="s1">        }
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="判断输入的是否为ip地址" class="heading-element"><span>16 判断输入的是否为IP地址</span>
  <a href="#%e5%88%a4%e6%96%ad%e8%be%93%e5%85%a5%e7%9a%84%e6%98%af%e5%90%a6%e4%b8%baip%e5%9c%b0%e5%9d%80" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>写一个脚本统计文件<code>nowcoder.txt</code>中的每一行是否是正确的<code>IP</code>地址。</p>
<p>如果是正确的<code>IP</code>地址输出：<code>yes</code></p>
<p>如果是错误的<code>IP</code>地址，且是四段号码的话输出：<code>no</code>，否则的话输出：<code>error</code></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;.&#34;</span> <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    flag = &#34;error&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    if (NF == 4) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        flag = &#34;yes&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">        for (i = 1; i &lt;= NF; i++) {
</span></span></span><span class="line"><span class="cl"><span class="s1">            if ($i &gt; 255) {
</span></span></span><span class="line"><span class="cl"><span class="s1">                flag = &#34;no&#34;;
</span></span></span><span class="line"><span class="cl"><span class="s1">                break;
</span></span></span><span class="line"><span class="cl"><span class="s1">            }
</span></span></span><span class="line"><span class="cl"><span class="s1">        }
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">    printf(flag&#34;\n&#34;)
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="将字段逆序输出文件的每行" class="heading-element"><span>17 将字段逆序输出文件的每行</span>
  <a href="#%e5%b0%86%e5%ad%97%e6%ae%b5%e9%80%86%e5%ba%8f%e8%be%93%e5%87%ba%e6%96%87%e4%bb%b6%e7%9a%84%e6%af%8f%e8%a1%8c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>编写一个<code>shell</code>脚本，将文件<code>nowcoder.txt</code>中每一行的字段逆序输出，其中字段之间使用英文冒号<code>:</code>相分隔。</p>
<p>假设<code>nowcoder.txt</code>内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false
</span></span><span class="line"><span class="cl">root:*:0:0:System Administrator:/var/root:/bin/sh</span></span></code></pre></td></tr></table>
</div>
</div><p>你的脚本应当输出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">/usr/bin/false:/var/empty:Unprivileged User:-2:-2:*:nobody
</span></span><span class="line"><span class="cl">/bin/sh:/var/root:System Administrator:0:0:*:root</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i = 1; i &lt;= NF; i++) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        temp[i] = $i
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i = NF; i &gt;= 1; i--) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        printf(&#34;%s%s&#34;, temp[i], (i == 1 ? &#34;\n&#34; : &#34;:&#34;))
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="域名进行计数排序处理" class="heading-element"><span>18 域名进行计数排序处理</span>
  <a href="#%e5%9f%9f%e5%90%8d%e8%bf%9b%e8%a1%8c%e8%ae%a1%e6%95%b0%e6%8e%92%e5%ba%8f%e5%a4%84%e7%90%86" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设有一些域名，存储在<code>nowcoder.txt</code>里，现在需要写一个<code>shell</code>脚本，将域名取出并根据域名进行计数排序处理（降序）。</p>
<p>假设<code>nowcoder.txt</code>内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">http://www.nowcoder.com/index.html
</span></span><span class="line"><span class="cl">http://www.nowcoder.com/1.html
</span></span><span class="line"><span class="cl">http://m.nowcoder.com/index.html</span></span></code></pre></td></tr></table>
</div>
</div><p>你的脚本应该输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">2 www.nowcoder.com
</span></span><span class="line"><span class="cl">1 m.nowcoder.com</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk -F <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    print($3)
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -r <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    print($1&#34; &#34;$2)
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="打印等腰三角形" class="heading-element"><span>19 打印等腰三角形</span>
  <a href="#%e6%89%93%e5%8d%b0%e7%ad%89%e8%85%b0%e4%b8%89%e8%a7%92%e5%bd%a2" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>编写一个<code>shell</code>脚本，输入正整数<code>n</code>，打印边长为<code>n</code>的等腰三角形。</p>
<p>示例：</p>
<p>输入：<code>5</code></p>
<p>输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">    *
</span></span><span class="line"><span class="cl">   * *
</span></span><span class="line"><span class="cl">  * * *
</span></span><span class="line"><span class="cl"> * * * *
</span></span><span class="line"><span class="cl">* * * * *</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">read</span> n
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="o">((</span><span class="nv">i</span> <span class="o">=</span> 1<span class="p">;</span> i &lt;<span class="o">=</span> n<span class="p">;</span> i++<span class="o">))</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">((</span><span class="nv">j</span> <span class="o">=</span> 1<span class="p">;</span> j &lt;<span class="o">=</span> n - i<span class="p">;</span> j++<span class="o">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="nb">printf</span> <span class="s2">&#34; &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="o">((</span><span class="nv">j</span> <span class="o">=</span> 1<span class="p">;</span> j &lt;<span class="o">=</span> i<span class="p">;</span> j++<span class="o">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[[</span> <span class="nv">$j</span> -eq <span class="nv">$i</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="nb">printf</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="nb">printf</span> <span class="s2">&#34;* &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl">    <span class="nb">printf</span> <span class="s2">&#34;\n&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="打印只有一个数字的行" class="heading-element"><span>20 打印只有一个数字的行</span>
  <a href="#%e6%89%93%e5%8d%b0%e5%8f%aa%e6%9c%89%e4%b8%80%e4%b8%aa%e6%95%b0%e5%ad%97%e7%9a%84%e8%a1%8c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设有一个<code>nowcoder.txt</code>，编写脚本，打印只有一个数字的行。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;[0-9]&#34;</span> <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    if (NF == 2) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        print($0)
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="格式化输出" class="heading-element"><span>21 格式化输出</span>
  <a href="#%e6%a0%bc%e5%bc%8f%e5%8c%96%e8%be%93%e5%87%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>有一个文件<code>nowcoder.txt</code>，里面的每一行都是一个数字串，编写一个<code>shell</code>脚本对文件中每一行的数字串进行格式化：每$3$个数字加入一个逗号（,）。</p>
<p>例如：数字串为“123456789”，那么需要格式化为123,456,789。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用-F分割数字串</span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;&#34;</span> <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i = 1; i &lt;= NF; i++) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        printf($i)
</span></span></span><span class="line"><span class="cl"><span class="s1">        if ((NF - i) % 3 == 0 &amp;&amp; i != NF) {
</span></span></span><span class="line"><span class="cl"><span class="s1">            printf(&#34;,&#34;)
</span></span></span><span class="line"><span class="cl"><span class="s1">        }
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">    printf(&#34;\n&#34;)
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="处理文本" class="heading-element"><span>22 处理文本</span>
  <a href="#%e5%a4%84%e7%90%86%e6%96%87%e6%9c%ac" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>有一个文本文件<code>nowcoder.txt</code>，假设内容格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">111:13443
</span></span><span class="line"><span class="cl">222:13211
</span></span><span class="line"><span class="cl">111:13643
</span></span><span class="line"><span class="cl">333:12341
</span></span><span class="line"><span class="cl">222:12123</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写一个<code>shell</code>脚本，按照以下的格式输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">[111]
</span></span><span class="line"><span class="cl">13443
</span></span><span class="line"><span class="cl">13643
</span></span><span class="line"><span class="cl">[222]
</span></span><span class="line"><span class="cl">13211
</span></span><span class="line"><span class="cl">12123
</span></span><span class="line"><span class="cl">[333]
</span></span><span class="line"><span class="cl">12341</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    cnt[$1] = cnt[$1] $2 &#34;\n&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">} END {
</span></span></span><span class="line"><span class="cl"><span class="s1">    for (i in cnt) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        printf(&#34;[%s]\n%s&#34;, i, cnt[i])
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> nowcoder.txt</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx日志分析1-ip访问次数统计" class="heading-element"><span>23 Nginx日志分析1-IP访问次数统计</span>
  <a href="#nginx%e6%97%a5%e5%bf%97%e5%88%86%e6%9e%901-ip%e8%ae%bf%e9%97%ae%e6%ac%a1%e6%95%b0%e7%bb%9f%e8%ae%a1" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设 <code>Nginx</code> 的日志存储在 <code>nowcoder.txt</code> 里，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="mf">192.168.1.20</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">21</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">14</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.21</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">21</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /2/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.22</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">21</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">21</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /3/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.23</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">21</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.24</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">22</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /2/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.25</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">22</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">26</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /3/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.20</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">08</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.21</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">09</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.22</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">10</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.22</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">10</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.20</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">14</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.21</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /2/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.22</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /3/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.25</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">16</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.24</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /2/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.25</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /3/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.20</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.21</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.22</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.22</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">15</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="mf">192.168.1.21</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">23</span><span class="o">/</span><span class="n">Apr</span><span class="o">/</span><span class="mi">2020</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mi">49</span> <span class="o">+</span><span class="mi">0800</span><span class="p">]</span> <span class="s">&#34;GET /1/index.php HTTP/1.1&#34;</span> <span class="mi">404</span> <span class="mi">490</span> <span class="s">&#34;-&#34;</span> <span class="s">&#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写 Shell 脚本统计出 2020 年 4 月 23 号访问 IP 的对应次数，并且按照次数降序排序。你的脚本应该输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="mi">5</span> <span class="mf">192.168.1.22</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="mf">192.168.1.21</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span> <span class="mf">192.168.1.20</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="mf">192.168.1.25</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mf">192.168.1.24</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 通过grep过滤，再统计排序</span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;23/Apr/2020&#34;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -r <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1, $2 }&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx日志分析2-统计某个时间段的ip访问量" class="heading-element"><span>24 Nginx日志分析2-统计某个时间段的IP访问量</span>
  <a href="#nginx%e6%97%a5%e5%bf%97%e5%88%86%e6%9e%902-%e7%bb%9f%e8%ae%a1%e6%9f%90%e4%b8%aa%e6%97%b6%e9%97%b4%e6%ae%b5%e7%9a%84ip%e8%ae%bf%e9%97%ae%e9%87%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设 <code>Nginx</code> 的日志存储在 <code>nowcoder.txt</code> 里，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写 <code>Shell</code> 脚本统计 2020年04月23日20点至23点去重后的 IP 访问量，你的脚本应该输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="mi">5</span></span></span></code></pre></td></tr></table>
</div>
</div><p>输出说明：2020年04月23日20点至23点，共有 192.168.1.24、192.168.1.25、192.168.1.20、192.168.1.21、192.168.1.22 共 5 个 IP 访问了。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;23/Apr/2020:2[0-3]&#34;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq <span class="p">|</span>
</span></span><span class="line"><span class="cl">wc -l</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx日志分析3-统计访问3次以上的ip" class="heading-element"><span>25 nginx日志分析3-统计访问3次以上的IP</span>
  <a href="#nginx%e6%97%a5%e5%bf%97%e5%88%86%e6%9e%903-%e7%bb%9f%e8%ae%a1%e8%ae%bf%e9%97%ae3%e6%ac%a1%e4%bb%a5%e4%b8%8a%e7%9a%84ip" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设<code>nginx</code>的日志我们存储在nowcoder.txt里，格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写<code>shell</code>脚本统计访问3次以上的IP，你的脚本应该输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">6 192.168.1.22
</span></span><span class="line"><span class="cl">5 192.168.1.21
</span></span><span class="line"><span class="cl">4 192.168.1.20</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1 }&#39;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -r <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    if ($1 &gt; 3) {
</span></span></span><span class="line"><span class="cl"><span class="s1">        print $1, $2
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx日志分析4-查询某个ip的详细访问情况" class="heading-element"><span>26 Nginx日志分析4-查询某个IP的详细访问情况</span>
  <a href="#nginx%e6%97%a5%e5%bf%97%e5%88%86%e6%9e%904-%e6%9f%a5%e8%af%a2%e6%9f%90%e4%b8%aaip%e7%9a%84%e8%af%a6%e7%bb%86%e8%ae%bf%e9%97%ae%e6%83%85%e5%86%b5" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设<code>Nginx</code>的日志存储在<code>nowcoder.txt</code>里，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">192.168.1.20 - - [21/Apr/2020:14:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [21/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [21/Apr/2020:21:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.23 - - [21/Apr/2020:22:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [22/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:08:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:14:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:15:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:15:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:16:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:22:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:23:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写<code>shell</code>脚本查询192.168.1.22的详细访问次数情况，按访问频率降序排序。你的脚本应该输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="mi">4</span> <span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">php</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">php</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;192.168.1.22&#34;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $7 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -r <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1, $2 }&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx日志分析5-统计爬虫抓取404的次数" class="heading-element"><span>27 nginx日志分析5-统计爬虫抓取404的次数</span>
  <a href="#nginx%e6%97%a5%e5%bf%97%e5%88%86%e6%9e%905-%e7%bb%9f%e8%ae%a1%e7%88%ac%e8%99%ab%e6%8a%93%e5%8f%96404%e7%9a%84%e6%ac%a1%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设<code>nginx</code>的日志存储在<code>nowcoder.txt</code>里，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">192.168.1.20 - - [21/Apr/2020:14:12:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 301 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [21/Apr/2020:15:00:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 500 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [21/Apr/2020:21:21:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.23 - - [21/Apr/2020:22:10:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [22/Apr/2020:15:00:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 200 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:08:05:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 200 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:14:12:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 200 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:15:00:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 200 490 &#34;-&#34; &#34;Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 200 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 300 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 500 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:22:10:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:23:59:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写<code>shell</code>脚本统计百度爬虫抓取404的次数，你的脚本应该输出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">2</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;404&#34;</span> <span class="p">|</span> grep <span class="s2">&#34;www.baidu.com&#34;</span> <span class="p">|</span> wc -l</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginx日志分析6-统计每分钟的请求数" class="heading-element"><span>28 Nginx日志分析6-统计每分钟的请求数</span>
  <a href="#nginx%e6%97%a5%e5%bf%97%e5%88%86%e6%9e%906-%e7%bb%9f%e8%ae%a1%e6%af%8f%e5%88%86%e9%92%9f%e7%9a%84%e8%af%b7%e6%b1%82%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设<code>Nginx</code>的日志存储在nowcoder.txt里，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">192.168.1.20 - - [21/Apr/2020:14:12:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [21/Apr/2020:15:00:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [21/Apr/2020:21:21:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.23 - - [21/Apr/2020:22:10:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [22/Apr/2020:15:00:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [22/Apr/2020:15:26:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:08:05:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Baiduspider&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:09:20:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:10:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:14:12:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:15:00:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:15:00:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Baiduspider&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:16:15:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.24 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /2/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.25 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /3/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.20 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:20:27:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.22 - - [23/Apr/2020:22:10:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;
</span></span><span class="line"><span class="cl">192.168.1.21 - - [23/Apr/2020:23:59:49 +0800] &#34;GET /1/index.php HTTP/1.1&#34; 404 490 &#34;-&#34; &#34;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:45.0) Gecko/20100101 Firefox/45.0&#34;</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写<code>Shell</code>脚本统计每分钟的请求数，并且按照请求数降序排序。你的脚本应该输出：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="mi">5</span> <span class="mi">20</span><span class="o">:</span><span class="mi">27</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span> <span class="mi">15</span><span class="o">:</span><span class="mo">00</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="mi">22</span><span class="o">:</span><span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="mi">14</span><span class="o">:</span><span class="mi">12</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span> <span class="mi">10</span><span class="o">:</span><span class="mi">27</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mi">23</span><span class="o">:</span><span class="mi">59</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mi">21</span><span class="o">:</span><span class="mi">21</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mi">16</span><span class="o">:</span><span class="mi">15</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mi">15</span><span class="o">:</span><span class="mi">26</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mi">09</span><span class="o">:</span><span class="mi">20</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span> <span class="mi">08</span><span class="o">:</span><span class="mo">05</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;{ print $2&#34;:&#34;$3 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -r <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1, $2 }&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="netstat练习1-查看各个状态的连接数" class="heading-element"><span>29 netstat练习1-查看各个状态的连接数</span>
  <a href="#netstat%e7%bb%83%e4%b9%a01-%e6%9f%a5%e7%9c%8b%e5%90%84%e4%b8%aa%e7%8a%b6%e6%80%81%e7%9a%84%e8%bf%9e%e6%8e%a5%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Proto Recv-Q Send-Q Local Address           Foreign Address         State
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:42316     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.1:323           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 0.0.0.0:45881           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.53:53           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 172.16.56.200:68        0.0.0.0:*
</span></span><span class="line"><span class="cl">udp6       0      0 ::1:323                 :::*
</span></span><span class="line"><span class="cl">raw6       0      0 :::58                   :::*                    7</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要编写shell脚本查看系统tcp连接中各个状态的连接数，并且按照连接数降序输出。你的脚本应该输出如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">ESTABLISHED 22
</span></span><span class="line"><span class="cl">TIME_WAIT 9
</span></span><span class="line"><span class="cl">LISTEN 3</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;tcp&#34;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $6 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -nr <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $2, $1 }&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="netstat练习2-查看和3306端口建立的连接" class="heading-element"><span>30 netstat练习2-查看和3306端口建立的连接</span>
  <a href="#netstat%e7%bb%83%e4%b9%a02-%e6%9f%a5%e7%9c%8b%e5%92%8c3306%e7%ab%af%e5%8f%a3%e5%bb%ba%e7%ab%8b%e7%9a%84%e8%bf%9e%e6%8e%a5" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设netstat命令运行的结果我们存储在nowcoder.txt里，格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Proto Recv-Q Send-Q Local Address           Foreign Address         State
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.1:323           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 0.0.0.0:45881           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.53:53           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 172.16.56.200:68        0.0.0.0:*
</span></span><span class="line"><span class="cl">udp6       0      0 ::1:323                 :::*
</span></span><span class="line"><span class="cl">raw6       0      0 :::58                   :::*                    7</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要你查看和本机3306端口建立连接并且状态是<code>established</code>的所有IP，按照连接数降序排序。你的脚本应该输出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">10 172.16.0.24
</span></span><span class="line"><span class="cl">9 172.16.34.144
</span></span><span class="line"><span class="cl">1 172.16.34.143</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;tcp.*ESTABLISHED&#34;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $5 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;$2 == 3306 { print $1 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -nr <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $1, $2 }&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="netstat练习3-输出每个ip的连接数" class="heading-element"><span>31 netstat练习3-输出每个IP的连接数</span>
  <a href="#netstat%e7%bb%83%e4%b9%a03-%e8%be%93%e5%87%ba%e6%af%8f%e4%b8%aaip%e7%9a%84%e8%bf%9e%e6%8e%a5%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设<code>netstat</code>命令运行的结果我们存储在<code>nowcoder.txt</code>里，格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Proto Recv-Q Send-Q Local Address           Foreign Address         State
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.1:323           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 0.0.0.0:45881           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.53:53           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 172.16.56.200:68        0.0.0.0:*
</span></span><span class="line"><span class="cl">udp6       0      0 ::1:323                 :::*
</span></span><span class="line"><span class="cl">raw6       0      0 :::58                   :::*                    7</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要你输出每个IP的连接数，按照连接数降序排序。你的脚本应该输出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">172.16.0.24 10
</span></span><span class="line"><span class="cl">172.16.34.144 9
</span></span><span class="line"><span class="cl">100.100.142.4 3
</span></span><span class="line"><span class="cl">0.0.0.0 3
</span></span><span class="line"><span class="cl">172.16.34.143 1
</span></span><span class="line"><span class="cl">172.16.240.74 1
</span></span><span class="line"><span class="cl">120.55.222.235 1
</span></span><span class="line"><span class="cl">100.100.54.133 1
</span></span><span class="line"><span class="cl">100.100.45.106 1
</span></span><span class="line"><span class="cl">100.100.32.118 1
</span></span><span class="line"><span class="cl">100.100.30.25 1
</span></span><span class="line"><span class="cl">100.100.142.5 1
</span></span><span class="line"><span class="cl">100.100.142.1 1</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;tcp&#34;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $5 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;{ print $1 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">uniq -c <span class="p">|</span>
</span></span><span class="line"><span class="cl">sort -nr <span class="p">|</span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{ print $2, $1 }&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="netstat练习4-输出和3306端口建立连接总的各个状态的数目" class="heading-element"><span>32 netstat练习4-输出和3306端口建立连接总的各个状态的数目</span>
  <a href="#netstat%e7%bb%83%e4%b9%a04-%e8%be%93%e5%87%ba%e5%92%8c3306%e7%ab%af%e5%8f%a3%e5%bb%ba%e7%ab%8b%e8%bf%9e%e6%8e%a5%e6%80%bb%e7%9a%84%e5%90%84%e4%b8%aa%e7%8a%b6%e6%80%81%e7%9a%84%e6%95%b0%e7%9b%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设<code>netstat</code>命令运行的结果我们存储在<code>nowcoder.txt</code>里，格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Proto Recv-Q Send-Q Local Address           Foreign Address         State
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:6160            0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41856     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49822     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49674     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:42316     172.16.34.143:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:44076     172.16.240.74:6379      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49656     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58248     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50108     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41944     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:35548     100.100.32.118:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:39024     100.100.45.106:443      TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41788     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58260     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41812     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41854     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:58252     100.100.142.4:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49586     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41754     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50466     120.55.222.235:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:38514     100.100.142.5:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49832     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:52162     100.100.30.25:80        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50372     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:50306     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49600     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41908     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:60292     100.100.142.1:80        TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:37650     100.100.54.133:80       TIME_WAIT
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41938     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:49736     172.16.0.24:3306        ESTABLISHED
</span></span><span class="line"><span class="cl">tcp        0      0 172.16.56.200:41890     172.16.34.144:3306      ESTABLISHED
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.1:323           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 0.0.0.0:45881           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 127.0.0.53:53           0.0.0.0:*
</span></span><span class="line"><span class="cl">udp        0      0 172.16.56.200:68        0.0.0.0:*
</span></span><span class="line"><span class="cl">udp6       0      0 ::1:323                 :::*
</span></span><span class="line"><span class="cl">raw6       0      0 :::58                   :::*                    7</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要你输出和本机3306端口建立连接的各个状态的数目，按照以下格式输出
<code>TOTAL_IP</code>表示建立连接的ip数目</p>
<p><code>TOTAL_LINK</code>表示建立连接的总数目</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">TOTAL_IP 3
</span></span><span class="line"><span class="cl">ESTABLISHED 20
</span></span><span class="line"><span class="cl">TOTAL_LINK 20</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># 统计包含3306且协议为tcp的总IP数量</span>
</span></span><span class="line"><span class="cl"><span class="nv">TOTAL_IP</span><span class="o">=</span><span class="k">$(</span>grep <span class="s2">&#34;tcp&#34;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	awk <span class="s1">&#39;{ print $5 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">	awk -F: <span class="s1">&#39;$2 == 3306 {print $1, $2 }&#39;</span> <span class="p">|</span>
</span></span><span class="line"><span class="cl">	sort <span class="p">|</span>
</span></span><span class="line"><span class="cl">	uniq <span class="p">|</span>
</span></span><span class="line"><span class="cl">	wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;TOTAL_IP </span><span class="nv">$TOTAL_IP</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 统计包含3306且状态为ESTABLISHED且协议为tcp的数量</span>
</span></span><span class="line"><span class="cl"><span class="nv">ESTABLISHED</span><span class="o">=</span><span class="k">$(</span>awk <span class="s1">&#39;/3306/ { if ($6 == &#34;ESTABLISHED&#34; &amp;&amp; $1 == &#34;tcp&#34;) print $5 }&#39;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ESTABLISHED </span><span class="nv">$ESTABLISHED</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 统计包含3306且协议为tcp的连接数量</span>
</span></span><span class="line"><span class="cl"><span class="nv">TOTAL_LINK</span><span class="o">=</span><span class="k">$(</span>awk <span class="s1">&#39;/3306/ { if ($1 == &#34;tcp&#34;) print $5 }&#39;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;TOTAL_LINK </span><span class="nv">$TOTAL_LINK</span><span class="s2">&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="业务分析-提取值" class="heading-element"><span>33 业务分析-提取值</span>
  <a href="#%e4%b8%9a%e5%8a%a1%e5%88%86%e6%9e%90-%e6%8f%90%e5%8f%96%e5%80%bc" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设我们的日志<code>nowcoder.txt</code>里，内容如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">12-May-2017 10:02:22.789 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:Apache Tomcat/8.5.15
</span></span><span class="line"><span class="cl">12-May-2017 10:02:22.813 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:May 5 2017 11:03:04 UTC
</span></span><span class="line"><span class="cl">12-May-2017 10:02:22.813 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:8.5.15.0
</span></span><span class="line"><span class="cl">12-May-2017 10:02:22.814 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:Windows, OS Version:10
</span></span><span class="line"><span class="cl">12-May-2017 10:02:22.814 信息 [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:x86_64</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要你提取出对应的值，输出内容如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">serverVersion:Apache Tomcat/8.5.15
</span></span><span class="line"><span class="cl">serverName:8.5.15.0
</span></span><span class="line"><span class="cl">osName:Windows
</span></span><span class="line"><span class="cl">osVersion:10</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">grep -o <span class="s2">&#34;Server version:.*&#34;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;{print &#34;serverVersion:&#34; $2}&#39;</span>
</span></span><span class="line"><span class="cl">grep -o <span class="s2">&#34;Server number:.*&#34;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;{print &#34;serverName:&#34; $2}&#39;</span>
</span></span><span class="line"><span class="cl">grep -o <span class="s2">&#34;OS Name:.*&#34;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	awk -F <span class="s2">&#34;[:,]&#34;</span> <span class="s1">&#39;{print &#34;osName:&#34; $2}&#39;</span>
</span></span><span class="line"><span class="cl">grep -o <span class="s2">&#34;OS Version:.*&#34;</span> nowcoder.txt <span class="p">|</span>
</span></span><span class="line"><span class="cl">	awk -F <span class="s2">&#34;:&#34;</span> <span class="s1">&#39;{print &#34;osVersion:&#34; $2}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ps分析-统计vszrss各自总和" class="heading-element"><span>34 ps分析-统计VSZ,RSS各自总和</span>
  <a href="#ps%e5%88%86%e6%9e%90-%e7%bb%9f%e8%ae%a1vszrss%e5%90%84%e8%87%aa%e6%80%bb%e5%92%8c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<p>假设命令运行的结果我们存储在<code>nowcoder.txt</code>里，格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
</span></span><span class="line"><span class="cl">root         1  0.0  0.1  37344  4604 ?        Ss    2020   2:13 /sbin/init
</span></span><span class="line"><span class="cl">root       231  0.0  1.5 166576 62740 ?        Ss    2020  15:15 /lib/systemd/systemd-journald
</span></span><span class="line"><span class="cl">root       237  0.0  0.0      0     0 ?        S&lt;    2020   2:06 [kworker/0:1H]
</span></span><span class="line"><span class="cl">root       259  0.0  0.0  45004  3416 ?        Ss    2020   0:25 /lib/systemd/systemd-udevd
</span></span><span class="line"><span class="cl">root       476  0.0  0.0      0     0 ?        S&lt;    2020   0:00 [edac-poller]
</span></span><span class="line"><span class="cl">root       588  0.0  0.0 276244  2072 ?        Ssl   2020   9:49 /usr/lib/accountsservice/accounts-daemon
</span></span><span class="line"><span class="cl">message+   592  0.0  0.0  42904  3032 ?        Ss    2020   0:01 /usr/bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation
</span></span><span class="line"><span class="cl">root       636  0.0  0.0  65532  3200 ?        Ss    2020   1:51 /usr/sbin/sshd -D
</span></span><span class="line"><span class="cl">daemon     637  0.0  0.0  26044  2076 ?        Ss    2020   0:00 /usr/sbin/atd -f
</span></span><span class="line"><span class="cl">root       639  0.0  0.0  29476  2696 ?        Ss    2020   3:29 /usr/sbin/cron -f
</span></span><span class="line"><span class="cl">root       643  0.0  0.0  20748  1992 ?        Ss    2020   0:26 /lib/systemd/systemd-logind
</span></span><span class="line"><span class="cl">syslog     645  0.0  0.0 260636  3024 ?        Ssl   2020   3:17 /usr/sbin/rsyslogd -n
</span></span><span class="line"><span class="cl">root       686  0.0  0.0 773124  2836 ?        Ssl   2020  26:45 /usr/sbin/nscd
</span></span><span class="line"><span class="cl">root       690  0.0  0.0  19472   252 ?        Ss    2020  14:39 /usr/sbin/irqbalance --pid=/var/run/irqbalance.pid
</span></span><span class="line"><span class="cl">ntp        692  0.0  0.0  98204   776 ?        Ss    2020  25:18 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -u 108:114
</span></span><span class="line"><span class="cl">uuidd      767  0.0  0.0  28624   192 ?        Ss    2020   0:00 /usr/sbin/uuidd --socket-activation
</span></span><span class="line"><span class="cl">root       793  0.0  0.0 128812  3148 ?        Ss    2020   0:00 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
</span></span><span class="line"><span class="cl">www-data   794  0.0  0.2 133376  9120 ?        S     2020 630:57 nginx: worker process
</span></span><span class="line"><span class="cl">www-data   795  0.0  0.2 133208  8968 ?        S     2020 633:02 nginx: worker process
</span></span><span class="line"><span class="cl">www-data   796  0.0  0.2 133216  9120 ?        S     2020 634:24 nginx: worker process
</span></span><span class="line"><span class="cl">www-data   797  0.0  0.2 133228  9148 ?        S     2020 632:56 nginx: worker process
</span></span><span class="line"><span class="cl">web        955  0.0  0.0  36856  2112 ?        Ss    2020   0:00 /lib/systemd/systemd --user
</span></span><span class="line"><span class="cl">web        956  0.0  0.0  67456  1684 ?        S     2020   0:00 (sd-pam)
</span></span><span class="line"><span class="cl">root      1354  0.0  0.0   8172   440 tty1     Ss+   2020   0:00 /sbin/agetty --noclear tty1 linux
</span></span><span class="line"><span class="cl">root      1355  0.0  0.0   7988   344 ttyS0    Ss+   2020   0:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220
</span></span><span class="line"><span class="cl">root      2513  0.0  0.0      0     0 ?        S    13:07   0:00 [kworker/u4:1]
</span></span><span class="line"><span class="cl">root      2587  0.0  0.0      0     0 ?        S    13:13   0:00 [kworker/u4:2]
</span></span><span class="line"><span class="cl">root      2642  0.0  0.0      0     0 ?        S    13:17   0:00 [kworker/1:0]
</span></span><span class="line"><span class="cl">root      2679  0.0  0.0      0     0 ?        S    13:19   0:00 [kworker/u4:0]
</span></span><span class="line"><span class="cl">root      2735  0.0  0.1 102256  7252 ?        Ss   13:24   0:00 sshd: web [priv]
</span></span><span class="line"><span class="cl">web       2752  0.0  0.0 102256  3452 ?        R    13:24   0:00 sshd: web@pts/0
</span></span><span class="line"><span class="cl">web       2753  0.5  0.1  14716  4708 pts/0    Ss   13:24   0:00 -bash
</span></span><span class="line"><span class="cl">web       2767  0.0  0.0  29596  1456 pts/0    R+   13:24   0:00 ps aux
</span></span><span class="line"><span class="cl">root     10634  0.0  0.0      0     0 ?        S    Nov16   0:00 [kworker/0:0]
</span></span><span class="line"><span class="cl">root     16585  0.0  0.0      0     0 ?        S&lt;    2020   0:00 [bioset]
</span></span><span class="line"><span class="cl">root     19526  0.0  0.0      0     0 ?        S    Nov16   0:00 [kworker/1:1]
</span></span><span class="line"><span class="cl">root     28460  0.0  0.0      0     0 ?        S    Nov15   0:03 [kworker/0:2]
</span></span><span class="line"><span class="cl">root     30685  0.0  0.0  36644  2760 ?        Ss    2020   0:00 /lib/systemd/systemd --user
</span></span><span class="line"><span class="cl">root     30692  0.0  0.0  67224  1664 ?        S     2020   0:00 (sd-pam)
</span></span><span class="line"><span class="cl">root     32689  0.0  0.0  47740  2100 ?        Ss    2020   0:00 /usr/local/ilogtail/ilogtail
</span></span><span class="line"><span class="cl">root     32691  0.2  0.5 256144 23708 ?        Sl    2020 1151:31 /usr/local/ilogtail/ilogtail</span></span></code></pre></td></tr></table>
</div>
</div><p>现在需要你统计<code>VSZ</code>，<code>RSS</code>各自的总和（以M兆为统计），输出格式如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">MEM TOTAL
</span></span><span class="line"><span class="cl">VSZ_SUM:3250.8M,RSS_SUM:179.777M</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl">awk <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    sum_vsz = sum_vsz + $5
</span></span></span><span class="line"><span class="cl"><span class="s1">    sum_rss = sum_rss + $6
</span></span></span><span class="line"><span class="cl"><span class="s1">}END{
</span></span></span><span class="line"><span class="cl"><span class="s1">    print(&#34;MEM TOTAL \n&#34; &#34;VSZ_SUM:&#34; sum_vsz/1024 &#34;M,&#34; &#34;RSS_SUM:&#34; sum_rss/1024 &#34;M&#34;)}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div>]]></description></item><item><title>Shell 教程</title><link>https://hezephyr.github.io/posts/06.shell%E6%95%99%E7%A8%8B/</link><pubDate>Sat, 22 Jan 2022 00:00:00 +0000</pubDate><author>HeZephyr</author><guid>https://hezephyr.github.io/posts/06.shell%E6%95%99%E7%A8%8B/</guid><description><![CDATA[<h2 id="shell概论" class="heading-element"><span>1 Shell概论</span>
  <a href="#shell%e6%a6%82%e8%ae%ba" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>Shell是一个用C语言编写的程序，它诞生于Unix，是我们通过命令行与Unix/Linux交互的工具。笼统地说：Shell既是一种命令语言，又是一种程序设计语言。</p>
<p>而Shell脚本是一种为Shell编写的脚本程序，有的时候也被称为Shell（但二者是两个完全不同的概念！），它可以直接在命令行中执行，也可以将一套逻辑组织成一个文件，方便复用。
Acwing网站提供给的AC Terminal中的命令行就可以看成是一个“Shell脚本在逐行执行”。</p>
<p>Unix/Linux系统中常见的shell脚本有很多：</p>
<ul>
<li>Bourne Shell（<code>/usr/bin/sh</code>或<code>/bin/sh</code>）</li>
<li>Bourne Again Shell（<code>/bin/bash</code>）</li>
<li>C Shell（<code>/usr/bin/csh</code>）</li>
<li>K Shell（<code>/usr/bin/ksh</code>）</li>
<li>Shell for Root（<code>/sbin/sh</code>）</li>
</ul>
<p>由于Linux系统中一般默认使用bash，而且其易用免费，所以我们接下来学习bash中的语法。</p>
<p><strong>脚本示例</strong></p>
<p>进入终端，新建一个<code>hello.sh</code>文件，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#! /bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">echo</span> <span class="s2">&#34;Hello, World!&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>说明：</strong></p>
<ul>
<li>
<p><code>sh</code>后缀则表示该文件是Shell脚本文件。</p>
</li>
<li>
<p><code>#!</code>告诉系统这个脚本用什么解释器来执行，后面所跟的就是你所需要用的解释器。这个一般都需要添加上，具体解释见运行。</p>
</li>
<li>
<p><code>echo</code>指令用于字符串的输出，所以运行该文件会输出<code>Hello,World</code>。</p>
</li>
</ul>
<p><strong>运行方式：</strong></p>
<ul>
<li>
<p>作为可执行文件</p>
<p>该方法将<code>hello.sh</code>作为可执行程序运行，由于未指定解释器，所以使用该方法第一行一定要指定解释器。</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#! /bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>chmod +x hello.sh <span class="c1">#使脚本具有可执行权限；</span>
</span></span><span class="line"><span class="cl">./hello.sh <span class="c1">#当前路径下执行</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>用解释器执行</p>
<p>该方法直接运行解释器，此时<code>hello.sh</code>作为Shell解释器的参数。此时Shell脚本就不需要指定解释器信息，则不需要第一行的注释了。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">bash hello.sh <span class="c1">#当然也可以用缩写 sh hello.sh</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><strong>输出：</strong></p>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/78757c2dc7064b4bae86b9c7461b3ade.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/78757c2dc7064b4bae86b9c7461b3ade.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/78757c2dc7064b4bae86b9c7461b3ade.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/78757c2dc7064b4bae86b9c7461b3ade.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/78757c2dc7064b4bae86b9c7461b3ade.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/78757c2dc7064b4bae86b9c7461b3ade.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h2 id="shell语法" class="heading-element"><span>2 Shell语法</span>
  <a href="#shell%e8%af%ad%e6%b3%95" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><h3 id="注释" class="heading-element"><span>2.1 注释</span>
  <a href="#%e6%b3%a8%e9%87%8a" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li>
<p><strong>单行注释</strong></p>
<p>每一行中<code>#</code>之后的内容均是注释。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 这是一行注释</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello, World&#34;</span> <span class="c1"># 这也是一行注释</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>多行注释</strong></p>
<p>Shell中的多行注释有点特别，格式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">:<span class="s">&lt;&lt;EOF
</span></span></span><span class="line"><span class="cl"><span class="s">第一行注释
</span></span></span><span class="line"><span class="cl"><span class="s">...
</span></span></span><span class="line"><span class="cl"><span class="s">第n行注释
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span></span></span></code></pre></td></tr></table>
</div>
</div><p>其中<code>EOF</code>可以替换成其他任意字符串，如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">:&lt;&lt;!
</span></span><span class="line"><span class="cl">第一行注释
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">第n行注释
</span></span><span class="line"><span class="cl">!</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="变量" class="heading-element"><span>2.2 变量</span>
  <a href="#%e5%8f%98%e9%87%8f" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li>
<p><strong>定义变量</strong></p>
<p>定义变量时，变量名不加美元符号<code>$</code>，同时特别需要注意的一点就是变量名与等号之间不能有空格（如果有自动打空格的习惯在这里最好克制）。shell中的变量命名同样须遵循如下规则：</p>
<ul>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>中间不能有空格，可以使用下划线 <strong>_</strong>。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<p>如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 有效的Shell变量名称</span>
</span></span><span class="line"><span class="cl">_var
</span></span><span class="line"><span class="cl">var123
</span></span><span class="line"><span class="cl">LF_DDFHI_X
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 无效的Shell变量名称</span>
</span></span><span class="line"><span class="cl">?var
</span></span><span class="line"><span class="cl">123abc
</span></span><span class="line"><span class="cl">echo</span></span></code></pre></td></tr></table>
</div>
</div><p>和现在大多数的语言一样，Shell定义变量不需要指定变量类型，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name1</span><span class="o">=</span><span class="s2">&#34;a&#34;</span> <span class="c1">#单引号定义字符串</span>
</span></span><span class="line"><span class="cl"><span class="nv">name2</span><span class="o">=</span><span class="s1">&#39;a&#39;</span> <span class="c1">#双引号定义字符串</span>
</span></span><span class="line"><span class="cl"><span class="nv">name3</span><span class="o">=</span>a   <span class="c1">#也可以不加引号，同样表示字符串</span></span></span></code></pre></td></tr></table>
</div>
</div><p><font color="red">在Bash shell中，每一个变量的值都是字符串，无论你给变量赋值用的时单引号双引号还是没有使用引号，都是使用字符串的i形式存储的，这很特殊。</font>串的i形式存储的，这很特殊。</font>串的i形式存储的，这很特殊。</font>串的i形式存储的，这很特殊。</font></p>
</li>
<li>
<p><strong>使用变量</strong></p>
<p>使用变量我们需要加上<code>$</code>符号或者<code>${}</code>符号。花括号时可选的，主要是为了帮助解释器识别变量边界。</p>
<p><font color="red">一定要注意：只有使用变量的时候才加美元符号<code>$</code></font>变量的时候才加美元符号<code>$</code></font>变量的时候才加美元符号<code>$</code></font></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$name</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="m">123</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/375905eaca5d47a3a259edffdbdec203.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/375905eaca5d47a3a259edffdbdec203.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/375905eaca5d47a3a259edffdbdec203.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/375905eaca5d47a3a259edffdbdec203.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/375905eaca5d47a3a259edffdbdec203.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/375905eaca5d47a3a259edffdbdec203.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p><strong>只读变量</strong></p>
<p>我们可以使用<code>readOnly</code>或者<code>declare</code>将变量设置为只读。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf
</span></span><span class="line"><span class="cl">readOnly name
</span></span><span class="line"><span class="cl"><span class="c1">#declare -r name #两种写法均可。</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>ylf <span class="c1">#此时会报错，因为已经设置成了只读变量。</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/46b734003f9a4fa8bb7ed91eb06cd1f5.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/46b734003f9a4fa8bb7ed91eb06cd1f5.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/46b734003f9a4fa8bb7ed91eb06cd1f5.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/46b734003f9a4fa8bb7ed91eb06cd1f5.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/46b734003f9a4fa8bb7ed91eb06cd1f5.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/46b734003f9a4fa8bb7ed91eb06cd1f5.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/6b53d378e1594c48843cbeee61fb3816.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/6b53d378e1594c48843cbeee61fb3816.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/6b53d378e1594c48843cbeee61fb3816.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/6b53d378e1594c48843cbeee61fb3816.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/6b53d378e1594c48843cbeee61fb3816.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/6b53d378e1594c48843cbeee61fb3816.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p><strong>删除变量</strong></p>
<p><code> unset</code>可以删除变量。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> name
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$name</span></span></span></code></pre></td></tr></table>
</div>
</div><p>此时没有输出<code>hzf</code>，代表已经删除了，这里没有报错是因为Shell将没有定义的变量设置为空字符串。
<a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/63971c3f222d4a3583f0284dae8c51c9.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/63971c3f222d4a3583f0284dae8c51c9.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/63971c3f222d4a3583f0284dae8c51c9.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/63971c3f222d4a3583f0284dae8c51c9.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/63971c3f222d4a3583f0284dae8c51c9.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/63971c3f222d4a3583f0284dae8c51c9.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
</li>
<li>
<p><strong>变量类型</strong></p>
<p>根据访问权限划分可以分为：</p>
<ul>
<li>
<p>自定义变量（局部变量）</p>
<p>在脚本或命令中定义，仅在当前Shell示例中有效，其他Shell启动的程序不能访问局部变量。即为子进程不能访问的变量。</p>
</li>
<li>
<p>环境变量（全局变量）</p>
<p>所有程序，包括shell启动程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。即为子进程可以访问的变量。</p>
</li>
</ul>
<p>自定义变量转换为环境变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf#定义自定义变量
</span></span><span class="line"><span class="cl"><span class="nb">export</span> name
</span></span><span class="line"><span class="cl">delcare -x name#两种方法均可</span></span></code></pre></td></tr></table>
</div>
</div><p>环境变量转化为自定义变量</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">name</span><span class="o">=</span>hzf#定义环境变量。
</span></span><span class="line"><span class="cl">delcare +x name#改为自定义变量。</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>Shell字符串</strong></p>
<p>字符串可以用单引号，也可以用双引号，也可以不用引号。但其中是有区别的：</p>
<ul>
<li>
<p>使用单引号字符串，其中的变量名不会输出，但可以输出转义字符。单引号字串中不能出现单独一个的单引号（对单引号使用转义符后也不行），但可成对出现，作为字符串拼接使用。</p>
</li>
<li>
<p>不用引号的字符串，其中变量可以输出，但是不能输出转移字符。</p>
</li>
<li>
<p>使用双引号的字符串，既可以输出变量也可以输出转义字符。</p>
</li>
</ul>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> 123<span class="nv">$name</span><span class="se">\n</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;123</span><span class="nv">$name</span><span class="s2">\n&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;123$name\n&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>输出：</p>
</li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/b678f7010e534684b9e7356b81ce8341.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/b678f7010e534684b9e7356b81ce8341.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/b678f7010e534684b9e7356b81ce8341.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/b678f7010e534684b9e7356b81ce8341.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/b678f7010e534684b9e7356b81ce8341.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/b678f7010e534684b9e7356b81ce8341.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p><strong>字符串操作</strong></p>
<ul>
<li>
<p>拼接字符串</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>xyz
</span></span><span class="line"><span class="cl"><span class="c1">#双引号字符串拼接</span>
</span></span><span class="line"><span class="cl"><span class="nv">s1</span><span class="o">=</span><span class="s2">&#34;Hello, </span>$<span class="s2"> {name} !”
</span></span></span><span class="line"><span class="cl"><span class="s2">s2=&#34;</span>Hello, <span class="s2">&#34;</span>$<span class="s2"> {name}&#34;</span>!<span class="s2">&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">echo </span><span class="nv">$s1</span><span class="s2"> </span><span class="nv">$s2</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e392df84562e4f809610f61c9ad7304a.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e392df84562e4f809610f61c9ad7304a.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e392df84562e4f809610f61c9ad7304a.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e392df84562e4f809610f61c9ad7304a.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e392df84562e4f809610f61c9ad7304a.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e392df84562e4f809610f61c9ad7304a.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p>获取字符串长度</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${#</span><span class="nv">name</span><span class="si">}</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/597a73a23cd54bf9a1873e28bc9aabd2.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/597a73a23cd54bf9a1873e28bc9aabd2.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/597a73a23cd54bf9a1873e28bc9aabd2.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/597a73a23cd54bf9a1873e28bc9aabd2.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/597a73a23cd54bf9a1873e28bc9aabd2.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/597a73a23cd54bf9a1873e28bc9aabd2.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p>提取字符串</p>
<p>注意，第一个字符的索引为$0$，给出的两个参数第一个为起始位置，第二个为截取长度。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;Hello, World!&#34;</span>                                                                                                        
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">4</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="p">:</span><span class="nv">0</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">name</span><span class="p">:</span><span class="nv">1</span><span class="si">}</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bf80338d3b6c448ebdc49085148497fa.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bf80338d3b6c448ebdc49085148497fa.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bf80338d3b6c448ebdc49085148497fa.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bf80338d3b6c448ebdc49085148497fa.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bf80338d3b6c448ebdc49085148497fa.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bf80338d3b6c448ebdc49085148497fa.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p><strong>文件参数变量</strong></p>
<p>在执行Shell脚本时，可以向脚本传递参数。<code>$1</code>是第一个参数，<code>$2</code>是第二个参数，以此类推。特殊的，<code>$0</code>是文件名（包含路径）。例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;文件名:</span><span class="nv">$0</span><span class="s2">&#34;</span>                                                                                                                                              
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;第一个参数:</span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;第二个参数:</span><span class="nv">$2</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>然后我们执行的时候在后面添加参数即可。如果没有给出，那么则为空字符。</p>
</li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/0631d6df189a4ed19b662c44d3e456e4.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/0631d6df189a4ed19b662c44d3e456e4.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/0631d6df189a4ed19b662c44d3e456e4.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/0631d6df189a4ed19b662c44d3e456e4.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/0631d6df189a4ed19b662c44d3e456e4.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/0631d6df189a4ed19b662c44d3e456e4.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li><strong>其他参数相关变量</strong>
<table>
  <thead>
      <tr>
          <th>参数</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$#`         |</td>
          <td>表文件传入的参数个数，如上例中值为2                        |</td>
      </tr>
      <tr>
          <td>$*`         |</td>
          <td>所有参数构成的用空格隔开的字符串，如上例中值为<code>&quot;$1 $2&quot;</code>    |</td>
      </tr>
      <tr>
          <td>$@`         |</td>
          <td>个参数分别用双引号括起来的字符串，如上例中值为<code>&quot;$1&quot; &quot;$2&quot; </code> |</td>
      </tr>
      <tr>
          <td>$$`         |</td>
          <td>本当前运行的进程ID                                         |</td>
      </tr>
      <tr>
          <td>$?`         |</td>
          <td>一条命令的退出状态（注意不是stdout，而是exit code）。0表示正常退出，其他值表示错误 |</td>
      </tr>
      <tr>
          <td>$(command)` |</td>
          <td>回<code>command</code>这条命令的stdout（可嵌套）                      |</td>
      </tr>
      <tr>
          <td>command`    |</td>
          <td>回<code>command</code>这条命令的stdout（不可嵌套）                    |</td>
      </tr>
  </tbody>
</table>
</li>
</ul>
<h3 id="数组" class="heading-element"><span>2.3 数组</span>
  <a href="#%e6%95%b0%e7%bb%84" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>数组中可以存放多个值。Bash Shell 只支持一维数组（不支持多维数组），初始化时不需要定义数组大小（与 PHP 类似）。与大部分编程语言类似，数组元素的下标由 0 开始。</p>
<ul>
<li>
<p><strong>定义</strong></p>
<p>Shell 数组用括号来表示，元素用&quot;空格&quot;符号分割开，语法格式如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">array_name</span><span class="o">=(</span>value1 value2 ... valuen<span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=(</span>张三 <span class="s2">&#34;李四&#34;</span> <span class="s1">&#39;王五&#39;</span><span class="o">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>也可以直接通过定义数组中元素的值来创建数组，如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">name<span class="o">[</span>0<span class="o">]=</span><span class="s2">&#34;张三&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>这样就创建了name数组。</p>
</li>
<li>
<p><strong>访问数组元素</strong></p>
<ul>
<li>
<p>访问单个元素</p>
<p>语法格式为：<code>${array_name[index]}</code></p>
<p>如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">name<span class="o">[</span>0<span class="o">]=</span><span class="s2">&#34;123&#34;</span>                                                                                                                                                 
</span></span><span class="line"><span class="cl">name<span class="o">[</span>3<span class="o">]=</span><span class="s2">&#34;124&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">name</span><span class="p">[0]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">name</span><span class="p">[3]</span><span class="si">}</span><span class="s2">&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9d41480b0709427c95be2ccaad1bc485.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9d41480b0709427c95be2ccaad1bc485.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9d41480b0709427c95be2ccaad1bc485.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9d41480b0709427c95be2ccaad1bc485.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9d41480b0709427c95be2ccaad1bc485.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9d41480b0709427c95be2ccaad1bc485.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p>访问所有元素</p>
<p>格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="c1">#第一种写法</span>
</span></span><span class="line"><span class="cl"><span class="si">${</span><span class="nv">array</span><span class="p">[*]</span><span class="si">}</span><span class="c1">#第二种写法</span></span></span></code></pre></td></tr></table>
</div>
</div><p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">array</span><span class="o">=(</span><span class="m">1</span> abc <span class="s2">&#34;def&#34;</span> yxc<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span>  <span class="c1"># 第一种写法</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">array</span><span class="p">[*]</span><span class="si">}</span>  <span class="c1"># 第二种写法</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/a2a6418d85824d1d81adbcdf60ee1e9e.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/a2a6418d85824d1d81adbcdf60ee1e9e.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/a2a6418d85824d1d81adbcdf60ee1e9e.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/a2a6418d85824d1d81adbcdf60ee1e9e.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/a2a6418d85824d1d81adbcdf60ee1e9e.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/a2a6418d85824d1d81adbcdf60ee1e9e.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
</li>
<li>
<p>获取数组长度</p>
<p>同字符串写法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">array</span><span class="o">=(</span><span class="m">1</span> abc <span class="s2">&#34;def&#34;</span> yxc<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span> <span class="c1">#第一种写法</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${#</span><span class="nv">array</span><span class="p">[*]</span><span class="si">}</span> <span class="c1">#第二种写法</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7383ce64177f4d47900ba723e91960d2.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7383ce64177f4d47900ba723e91960d2.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7383ce64177f4d47900ba723e91960d2.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7383ce64177f4d47900ba723e91960d2.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7383ce64177f4d47900ba723e91960d2.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7383ce64177f4d47900ba723e91960d2.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h3 id="expr命令与基本运算符" class="heading-element"><span>2.4 expr命令与基本运算符</span>
  <a href="#expr%e5%91%bd%e4%bb%a4%e4%b8%8e%e5%9f%ba%e6%9c%ac%e8%bf%90%e7%ae%97%e7%ac%a6" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>Shell 和其他编程语言一样，支持多种运算符，包括：</p>
<ul>
<li>算数运算符</li>
<li>关系运算符</li>
<li>布尔运算符</li>
<li>字符串运算符</li>
<li>文件测试运算符</li>
</ul>
<p>但是原生Bash不支持简单的数学运算，我们需要通过其他命令来实现，如<code>awk</code>,<code>expr</code>，<code>expr</code>命令最常用，所以这里介绍<code>expr</code>。</p>
<p><code>expr</code>是一款表达式计算工具，使用它能完成表达式的求值操作。格式为：</p>
<p><code>expr 表达式</code></p>
<ul>
<li>
<p><strong>表达式说明</strong></p>
<ul>
<li>用空格隔开每一项</li>
<li>用反斜杠放在shell特定的字符前面（发现表达式运行错误时，可以试试转义）</li>
<li>对包含空格和其他特殊字符的字符串要用引号括起来</li>
<li><code>expr</code>会在<code>stdout</code>中输出结果。如果为逻辑关系表达式，则结果为真，<code>stdout</code>为1，否则为0。</li>
<li><code>expr</code>的<code>exit code</code>：如果为逻辑关系表达式，则结果为真，<code>exit code</code>为0，否则为1。</li>
<li>完整的表达式要被 ` ` 包含，注意这个字符不是常用的单引号，而是反引号，代表执行该命令。通常在 Esc 键下边。</li>
</ul>
</li>
<li>
<p><strong>算数表达式</strong></p>
<p>下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">运算符</th>
          <th style="text-align: left">说明</th>
          <th style="text-align: left">举例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">|</td>
          <td style="text-align: left">法                                          |</td>
          <td style="text-align: left">expr $a + $b` 结果为 30。     |</td>
      </tr>
      <tr>
          <td style="text-align: left">|</td>
          <td style="text-align: left">法                                          |</td>
          <td style="text-align: left">expr $a - $b` 结果为 -10。    |</td>
      </tr>
      <tr>
          <td style="text-align: left">|</td>
          <td style="text-align: left">法                                          |</td>
          <td style="text-align: left">expr $a * $b` 结果为  200。  |</td>
      </tr>
      <tr>
          <td style="text-align: left">|</td>
          <td style="text-align: left">法                                          |</td>
          <td style="text-align: left">expr $b / $a` 结果为 2。      |</td>
      </tr>
      <tr>
          <td style="text-align: left">|</td>
          <td style="text-align: left">余                                          |</td>
          <td style="text-align: left">expr $b % $a` 结果为 0。      |</td>
      </tr>
      <tr>
          <td style="text-align: left">|</td>
          <td style="text-align: left">值                                          |</td>
          <td style="text-align: left">a=$b` 将把变量 b 的值赋给 a。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">font color=&ldquo;red&rdquo;&gt;     |</td>
          <td style="text-align: left">等。用于比较两个数字，相同则返回 true。     |</td>
          <td style="text-align: left">[ $a </font> $b ]` 返回 false。    |</td>
      </tr>
      <tr>
          <td style="text-align: left">=     |</td>
          <td style="text-align: left">相等。用于比较两个数字，不相同则返回 true。 |</td>
          <td style="text-align: left">[ $a != $b ]` 返回 true。     |</td>
      </tr>
  </tbody>
</table>
<p>**注意：**条件表达式要放在方括号之间，并且要有空格，例如: <strong><code>[$a&lt;font color=&quot;red&quot;&gt;$b]</code></strong> 是错误的，必须写成 <strong><code>[ $a &lt;/font&gt; $b ]</code></strong>。注意乘号等特殊符号需要转义。<code>()</code>可表优先级，但同样需要反斜杠转移。</p>
<p>实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>                                                                                                                                                                         
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a + b = `expr </span><span class="nv">$a</span><span class="s2"> + </span><span class="nv">$b</span><span class="s2">`&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a - b = `expr </span><span class="nv">$a</span><span class="s2"> - </span><span class="nv">$b</span><span class="s2">`&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a * b = `expr </span><span class="nv">$a</span><span class="s2"> \* </span><span class="nv">$b</span><span class="s2">`&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a / b = `expr </span><span class="nv">$a</span><span class="s2"> / </span><span class="nv">$b</span><span class="s2">`&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a % b = `expr </span><span class="nv">$a</span><span class="s2"> % </span><span class="nv">$b</span><span class="s2">`&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a &lt;font color=&#34;</span>red<span class="s2">&#34;&gt; b = `expr [</span><span class="nv">$a</span><span class="s2"> &lt;/font&gt; </span><span class="nv">$b</span><span class="s2">]`&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a != b = `expr [</span><span class="nv">$a</span><span class="s2"> != </span><span class="nv">$b</span><span class="s2">]`&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="nv">$b</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2">&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p><strong>关系运算符</strong></p>
<p>Shell支持正常的关系比较运算符，即<code>&lt;,&lt;=,&gt;,&gt;=</code>等。其会返回01代表结果。</p>
<p>实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>                                                                                                                                                                         
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a &lt; b : `expr </span><span class="nv">$a</span><span class="s2"> \&lt; </span><span class="nv">$b</span><span class="s2">`&#34;</span> <span class="c1">#需要转义</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a &gt; b : `expr </span><span class="nv">$a</span><span class="s2"> &#39;&gt;&#39; </span><span class="nv">$b</span><span class="s2">`&#34;</span> <span class="c1">#也可以用引号括起来。</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;a &gt;= b : `expr </span><span class="nv">$a</span><span class="s2"> &#39;&gt;=&#39; </span><span class="nv">$b</span><span class="s2">`&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png?size=small" data-sub-html="<h2>https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png" alt="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png?size=large 2x" data-title="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/eab97235bd544c8cadf2ff8a59e81a89.png" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<p>同时，Shell也给出了自己特定的比较命令，如下表：</p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th style="text-align: left">运算符</th>
          <th style="text-align: left">说明</th>
          <th style="text-align: left">举例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>-eq</code></td>
          <td style="text-align: left">检测两个数是否相等，相等返回 true。</td>
          <td style="text-align: left"><code>[ $a -eq $b ]</code> 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>-ne</code></td>
          <td style="text-align: left">检测两个数是否不相等，不相等返回 true。</td>
          <td style="text-align: left"><code>[ $a -ne $b ] </code>返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>-gt</code></td>
          <td style="text-align: left">检测左边的数是否大于右边的，如果是，则返回 true。</td>
          <td style="text-align: left"><code>[ $a -gt $b ]</code> 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>-lt</code></td>
          <td style="text-align: left">检测左边的数是否小于右边的，如果是，则返回 true。</td>
          <td style="text-align: left"><code>[ $a -lt $b ]</code> 返回 true。</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>-ge</code></td>
          <td style="text-align: left">检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
          <td style="text-align: left"><code>[ $a -ge $b ]</code> 返回 false。</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>-le</code></td>
          <td style="text-align: left">检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
          <td style="text-align: left"><code>[ $a -le $b ]</code> 返回 true。</td>
      </tr>
  </tbody>
</table>
<p>实例<font color="red">（注：if&hellip;then是条件语句，之后会讲解）</font>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -eq <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2"> : a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -eq </span><span class="nv">$b</span><span class="s2">: a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -ne <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ne </span><span class="nv">$b</span><span class="s2">: a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ne </span><span class="nv">$b</span><span class="s2"> : a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -gt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -gt </span><span class="nv">$b</span><span class="s2">: a 大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -gt </span><span class="nv">$b</span><span class="s2">: a 不大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -lt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -lt </span><span class="nv">$b</span><span class="s2">: a 小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -lt </span><span class="nv">$b</span><span class="s2">: a 不小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -ge <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ge </span><span class="nv">$b</span><span class="s2">: a 大于或等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -ge </span><span class="nv">$b</span><span class="s2">: a 小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> -le <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -le </span><span class="nv">$b</span><span class="s2">: a 小于或等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl"> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2"> -le </span><span class="nv">$b</span><span class="s2">: a 大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/3cc514dc121449c5932dec5ed5ed4935.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/3cc514dc121449c5932dec5ed5ed4935.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/3cc514dc121449c5932dec5ed5ed4935.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/3cc514dc121449c5932dec5ed5ed4935.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/3cc514dc121449c5932dec5ed5ed4935.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/3cc514dc121449c5932dec5ed5ed4935.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p><strong>字符串表达式</strong></p>
<p>即结合<code>expr</code>命令实现对字符串的操作，常见有以下：</p>
<ul>
<li><code>length str</code>：返回str的长度。</li>
<li><code>index str charSet</code>:返回字符集charSet中任意一个字符在str中最前面字符的位置。下标从1开始，如果不存在，则返回0。</li>
<li><code>substr str st len</code>：截取字符串str，从st位置开始，长度最大为<code>len</code>的子串。如果截取不成功，则返回空字符串。</li>
</ul>
<p>实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">str</span><span class="o">=</span><span class="s2">&#34;Hello,World!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>expr length <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span><span class="sb">`</span> <span class="c1">#`不是单引号，而是反引号，代表执行该命令。</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>expr index <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span> llo<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>expr substr <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span> <span class="m">1</span> 4<span class="sb">`</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/552fb79080d240bdb6702df6ea2dd9f4.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/552fb79080d240bdb6702df6ea2dd9f4.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/552fb79080d240bdb6702df6ea2dd9f4.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/552fb79080d240bdb6702df6ea2dd9f4.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/552fb79080d240bdb6702df6ea2dd9f4.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/552fb79080d240bdb6702df6ea2dd9f4.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
</li>
<li>
<p><strong>文件测试运算符</strong></p>
<p>文件测试运算符用于检测 Unix 文件的各种属性。</p>
<p>属性检测描述如下：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">操作符</th>
          <th style="text-align: left">说明</th>
          <th style="text-align: left">举例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">b file |</td>
          <td style="text-align: left">测文件是否是块设备文件，如果是，则返回 true。              |</td>
          <td style="text-align: left">-b $file ] 返回 false。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">c file |</td>
          <td style="text-align: left">测文件是否是字符设备文件，如果是，则返回 true。            |</td>
          <td style="text-align: left">-c $file ] 返回 false。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">d file |</td>
          <td style="text-align: left">测文件是否是目录，如果是，则返回 true。                    |</td>
          <td style="text-align: left">-d $file ] 返回 false。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">f file |</td>
          <td style="text-align: left">测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。 |</td>
          <td style="text-align: left">-f $file ] 返回 true。  |</td>
      </tr>
      <tr>
          <td style="text-align: left">g file |</td>
          <td style="text-align: left">测文件是否设置了 SGID 位，如果是，则返回 true。            |</td>
          <td style="text-align: left">-g $file ] 返回 false。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">k file |</td>
          <td style="text-align: left">测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。  |</td>
          <td style="text-align: left">-k $file ] 返回 false。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">p file |</td>
          <td style="text-align: left">测文件是否是有名管道，如果是，则返回 true。                |</td>
          <td style="text-align: left">-p $file ] 返回 false。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">u file |</td>
          <td style="text-align: left">测文件是否设置了 SUID 位，如果是，则返回 true。            |</td>
          <td style="text-align: left">-u $file ] 返回 false。 |</td>
      </tr>
      <tr>
          <td style="text-align: left">r file |</td>
          <td style="text-align: left">测文件是否可读，如果是，则返回 true。                      |</td>
          <td style="text-align: left">-r $file ] 返回 true。  |</td>
      </tr>
      <tr>
          <td style="text-align: left">w file |</td>
          <td style="text-align: left">测文件是否可写，如果是，则返回 true。                      |</td>
          <td style="text-align: left">-w $file ] 返回 true。  |</td>
      </tr>
      <tr>
          <td style="text-align: left">x file |</td>
          <td style="text-align: left">测文件是否可执行，如果是，则返回 true。                    |</td>
          <td style="text-align: left">-x $file ] 返回 true。  |</td>
      </tr>
      <tr>
          <td style="text-align: left">s file |</td>
          <td style="text-align: left">测文件是否为空（文件大小是否大于0），不为空返回 true。     |</td>
          <td style="text-align: left">-s $file ] 返回 true。  |</td>
      </tr>
      <tr>
          <td style="text-align: left">e file |</td>
          <td style="text-align: left">测文件（包括目录）是否存在，如果是，则返回 true。          |</td>
          <td style="text-align: left">-e $file ] 返回 true。  |</td>
      </tr>
  </tbody>
</table>
</li>
</ul>
<h3 id="read命令" class="heading-element"><span>2.5 read命令</span>
  <a href="#read%e5%91%bd%e4%bb%a4" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>read命令可用于从标准输入中读取单行数据，当读到文件结束符时，<code>exit code</code>为1，否则为0。</p>
<p>参数说明：</p>
<ul>
<li><code>-p</code>：后面可以接提示信息。</li>
<li><code>-t</code>：后面跟秒数，定义输入字符的等待时间，超过等待时间后会自动忽略此命令</li>
</ul>
<p>实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">read</span> name
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$name</span>
</span></span><span class="line"><span class="cl"><span class="nb">read</span> -p <span class="s2">&#34;please input your name:&#34;</span> -t <span class="m">30</span> name <span class="c1">#读入name的值，等待30s。</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$name</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/18c65cb79166418c9ad9f330b8d8de7a.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/18c65cb79166418c9ad9f330b8d8de7a.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/18c65cb79166418c9ad9f330b8d8de7a.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/18c65cb79166418c9ad9f330b8d8de7a.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/18c65cb79166418c9ad9f330b8d8de7a.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/18c65cb79166418c9ad9f330b8d8de7a.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h3 id="echo命令" class="heading-element"><span>2.6 echo命令</span>
  <a href="#echo%e5%91%bd%e4%bb%a4" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>echo命令用于字符串的输出，在前面的过程中我们已经接触到了，其命令格式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> string</span></span></code></pre></td></tr></table>
</div>
</div><p>我们可以用echo实现更复杂的输出格式控制。</p>
<ul>
<li>
<p><strong>显示普通字符串</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello, World!&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>这种情况下，我们不加双引号也是可以的。</p>
</li>
<li>
<p><strong>显示转义字符</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;\&#34;Hello,World!\&#34;&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p>同样，这里的双引号也可以省略。</p>
</li>
<li>
<p><strong>显示变量</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;My name is </span><span class="nv">$name</span><span class="s2">&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>显示换行等特殊字符</strong></p>
<p>注意，这些字符都需要通过<code>-e</code>命令开启转义才能起作用的，如：<code>\\ \a \b \c \d \e \f \n \r \t \v</code> 这些是要在有 <code>-e</code> 的时候才能起作用, 其他时候的转义是不用<code>- e</code>也能转义的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;Hello\n&#34;</span> <span class="c1">#-e开启转义。</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;World!&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bb29f0e88ad149b1b22c7a223d81ad25.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bb29f0e88ad149b1b22c7a223d81ad25.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bb29f0e88ad149b1b22c7a223d81ad25.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bb29f0e88ad149b1b22c7a223d81ad25.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bb29f0e88ad149b1b22c7a223d81ad25.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/bb29f0e88ad149b1b22c7a223d81ad25.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>
<p><strong>显示结果定向至文件</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Hello, World!&#34;</span> &gt; output.txt</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/2d5d4a1ed79a4b53831c743142c8e83d.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/2d5d4a1ed79a4b53831c743142c8e83d.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/2d5d4a1ed79a4b53831c743142c8e83d.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/2d5d4a1ed79a4b53831c743142c8e83d.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/2d5d4a1ed79a4b53831c743142c8e83d.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/2d5d4a1ed79a4b53831c743142c8e83d.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
</li>
<li>
<p><strong>原样输出字符串</strong></p>
<p>前面有提及，如果想原样输出，不进行转义或者取变量，用单引号。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span>hzf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;$name&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e16c0084b604452cbfb1d2c9f62ce270.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e16c0084b604452cbfb1d2c9f62ce270.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e16c0084b604452cbfb1d2c9f62ce270.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e16c0084b604452cbfb1d2c9f62ce270.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e16c0084b604452cbfb1d2c9f62ce270.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/e16c0084b604452cbfb1d2c9f62ce270.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
</li>
<li>
<p><strong>显示命令执行结果</strong></p>
<p>使用反引号。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>date<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>ls<span class="sb">`</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/5aa567919f7d40f98f1fc020dbf34c8d.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/5aa567919f7d40f98f1fc020dbf34c8d.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/5aa567919f7d40f98f1fc020dbf34c8d.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/5aa567919f7d40f98f1fc020dbf34c8d.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/5aa567919f7d40f98f1fc020dbf34c8d.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/5aa567919f7d40f98f1fc020dbf34c8d.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h3 id="printf命令" class="heading-element"><span>2.7 printf命令</span>
  <a href="#printf%e5%91%bd%e4%bb%a4" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>Shell的printf命令和C语言中的printf差不多，用于格式化输出。该命令不会像echo命令一样自动添加换行。其语法为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">printf</span> format-string <span class="o">[</span>args<span class="o">]</span></span></span></code></pre></td></tr></table>
</div>
</div><p>其中format-string为格式控制字符串，[args]为参数列表。</p>
<p>实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#-表示左对齐，没有则表示右对齐，d为宽度。%s表示输出字符串，%d整型输出。</span>
</span></span><span class="line"><span class="cl"><span class="c1">#%-10s则表示输出宽度为10的左对齐字符串。而%-4.2f则表示输出4位整数，保留2位小数。</span>
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;%-10s %-8s %-4s\n&#34;</span> 姓名 性别 体重kg  
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭靖 男 66.1234
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;%-10s %-8s %-4.2f\n&#34;</span> 杨过 男 48.6543
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭芙 女 47.9876</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7543126cfccb4735ad5b5d9402d566d7.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7543126cfccb4735ad5b5d9402d566d7.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7543126cfccb4735ad5b5d9402d566d7.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7543126cfccb4735ad5b5d9402d566d7.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7543126cfccb4735ad5b5d9402d566d7.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7543126cfccb4735ad5b5d9402d566d7.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li><strong>命令格式指示符</strong>
<table>
  <thead>
      <tr>
          <th>符号</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>c    |</td>
          <td>SCII字符.显示相对应参数的第一个字符    |</td>
      </tr>
      <tr>
          <td>d,%i |</td>
          <td>进制整数                              |</td>
      </tr>
      <tr>
          <td>E    |</td>
          <td>点格式([-d].precisionE [+-dd])        |</td>
      </tr>
      <tr>
          <td>e    |</td>
          <td>点格式([-d].precisione [+-dd])        |</td>
      </tr>
      <tr>
          <td>g    |</td>
          <td>e或%f转换,看哪一个较短,则删除结尾的零  |</td>
      </tr>
      <tr>
          <td>G    |</td>
          <td>E或%f转换,看哪一个较短,则删除结尾的零  |</td>
      </tr>
      <tr>
          <td>s    |</td>
          <td>符串                                  |</td>
      </tr>
      <tr>
          <td>u    |</td>
          <td>带正负号的十进制值                    |</td>
      </tr>
      <tr>
          <td>x    |</td>
          <td>带正负号的十六进制.使用a至f表示10至15 |</td>
      </tr>
      <tr>
          <td>%    |</td>
          <td>面意义的%                             |</td>
      </tr>
      <tr>
          <td>X    |</td>
          <td>带正负号的十六进制.使用A至F表示10至15 |</td>
      </tr>
  </tbody>
</table>
</li>
</ul>
<h3 id="test命令与判断符号" class="heading-element"><span>2.8 test命令与判断符号[]</span>
  <a href="#test%e5%91%bd%e4%bb%a4%e4%b8%8e%e5%88%a4%e6%96%ad%e7%ac%a6%e5%8f%b7" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>在命令行中输入<code>man test</code>，即可查看<code>test</code>命令的用法。
<code>test</code>命令可以用于判断文件类型，以及对变量做比较。<code>test</code>命令用<code>exit code</code>返回结果，而不是使用<code>stdout</code>。0表示真，非0表示假。这里可以通过<code>echo $?</code>来输出上一条命令的结果。</p>
<ul>
<li><strong>文件判断</strong>
命令格式：<code>test 测试参数 filename </code>
其中常用测试参数如下表：</li>
</ul>
<table>
  <thead>
      <tr>
          <th>测试参数</th>
          <th>代表意义</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>-e</code></td>
          <td>文件是否存在</td>
      </tr>
      <tr>
          <td><code>-f</code></td>
          <td>是否为文件</td>
      </tr>
      <tr>
          <td><code>-d</code></td>
          <td>是否为目录</td>
      </tr>
      <tr>
          <td><code>-r</code></td>
          <td>文件是否可读</td>
      </tr>
      <tr>
          <td><code>-w</code></td>
          <td>文件是否可写</td>
      </tr>
      <tr>
          <td><code>-x</code></td>
          <td>文件是否可执行</td>
      </tr>
      <tr>
          <td><code>-s</code></td>
          <td>是否为非空文件</td>
      </tr>
      <tr>
          <td>测试</td>
          <td></td>
      </tr>
      <tr>
          <td><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/45e5664213814ed38ca3f365f7f6b848.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/45e5664213814ed38ca3f365f7f6b848.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/45e5664213814ed38ca3f365f7f6b848.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/45e5664213814ed38ca3f365f7f6b848.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/45e5664213814ed38ca3f365f7f6b848.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/45e5664213814ed38ca3f365f7f6b848.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></td>
          <td></td>
      </tr>
  </tbody>
</table>
<ul>
<li><strong>整数之间的比较</strong>
命令格式：<code>test $a 关系运算符 $b</code>
其中关系运算符为上文所提及的，这里不作列举。</li>
<li><strong>字符串比较</strong>
相关操作如表所示：</li>
</ul>
<table>
  <thead>
      <tr>
          <th>测试参数</th>
          <th>代表意义</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>test -z str</code></td>
          <td>判断str是否为空，如果为空，返回true，否则false</td>
      </tr>
      <tr>
          <td><code>test -n str</code></td>
          <td>判断str是否为非空，如果非空，返回true，否则false.其中-n可以省略</td>
      </tr>
      <tr>
          <td><code>test str1 == str2</code></td>
          <td>判断str1是否等于str2</td>
      </tr>
      <tr>
          <td><code>test str1 != str2</code></td>
          <td>判断str1是否不等于str2</td>
      </tr>
      <tr>
          <td>`<a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></td>
          <td></td>
      </tr>
  </tbody>
</table>
<ul>
<li><strong>多重条件判定</strong>
即判断多个条件是否符合要求，可以嵌套多层。具体操作图表所示：</li>
</ul>
<table>
  <thead>
      <tr>
          <th>测试参数</th>
          <th>代表意义</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>-a</code></td>
          <td>两条件是否同时成立</td>
      </tr>
      <tr>
          <td><code>-o</code></td>
          <td>两条件是否至少一个成立</td>
      </tr>
      <tr>
          <td><code>!</code></td>
          <td>取反。对返回结果取反</td>
      </tr>
      <tr>
          <td><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></td>
          <td></td>
      </tr>
  </tbody>
</table>
<ul>
<li><strong>判断符号<code>[]</code></strong>
和<code>test</code>命令用法几乎一模一样，只是将需要判断的内容放入括号中。
更常用于<code>if</code>语句中，且<code>[[]]</code>是<code>[]</code>的加强版，支持的特性也更多。
值得注意的是一些特性：<code>[]</code>内的每一项都必须用空格隔开；中括号内的变量，最好用双引号括起来；中括号内的常数，最好用单或双引号括起来。
<a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></li>
</ul>
<h3 id="判断语句" class="heading-element"><span>2.9 判断语句</span>
  <a href="#%e5%88%a4%e6%96%ad%e8%af%ad%e5%8f%a5" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li><code>if</code>语句
和python的语法有点像，命令格式如下：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">[</span> <span class="n">条件</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">then</span>
</span></span><span class="line"><span class="cl">	<span class="n">内容</span>
</span></span><span class="line"><span class="cl"><span class="n">elif</span> <span class="p">[</span> <span class="n">条件</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">then</span> 
</span></span><span class="line"><span class="cl">	<span class="n">内容</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">	<span class="n">内容</span>
</span></span><span class="line"><span class="cl"> <span class="n">fi</span></span></span></code></pre></td></tr></table>
</div>
</div><p>注意<code>fi</code>为结束标记，是一定需要加的，作为结尾闭合。
实例：
<a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330070.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330070.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330070.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330070.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330070.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330070.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li><code>case...esac</code>形式
命令格式如下：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">case</span> <span class="nv">$变量名</span> <span class="k">in</span> 
</span></span><span class="line"><span class="cl">	<span class="n">value1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">内容</span>
</span></span><span class="line"><span class="cl">		<span class="p">;;</span> <span class="c"># ;;，类似break</span>
</span></span><span class="line"><span class="cl">	<span class="n">value2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="n">内容</span>
</span></span><span class="line"><span class="cl">		<span class="p">;;</span>
</span></span><span class="line"><span class="cl">	<span class="p">*)</span> <span class="c">#类似default</span>
</span></span><span class="line"><span class="cl">		<span class="n">内容</span>
</span></span><span class="line"><span class="cl">		<span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="n">esac</span> <span class="c"># 也是结尾闭合语句</span></span></span></code></pre></td></tr></table>
</div>
</div><p>测试
<a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330094.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330094.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330094.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330094.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330094.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/watermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAdW5pcXVlX3B1cnN1aXQ%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16-20240609093330094.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h3 id="循环语句" class="heading-element"><span>2.10 循环语句</span>
  <a href="#%e5%be%aa%e7%8e%af%e8%af%ad%e5%8f%a5" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><ul>
<li><code>for...in...do...done</code>语句
命令格式：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="k">for</span> <span class="n">var</span> <span class="k">in</span> <span class="n">val1</span> <span class="n">val2</span> <span class="n">val3</span> <span class="p">...</span> <span class="n">valN</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="n">内容</span>
</span></span><span class="line"><span class="cl"><span class="n">done</span> <span class="c"># 结尾闭合</span></span></span></code></pre></td></tr></table>
</div>
</div><p>循环规则为：从左到右遍历，当变量值为列表时，则一次遍历完列表。
实例1：输出a 2 cc，每个元素一行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="k">for</span> <span class="n">var</span> <span class="k">in</span> <span class="n">a</span> <span class="mf">2</span> <span class="n">cc</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span> 
</span></span><span class="line"><span class="cl">	<span class="nb">echo </span><span class="nv">$var</span>
</span></span><span class="line"><span class="cl"><span class="n">done</span>            </span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/f745418c2f304fdcba876bbd796f3238.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/f745418c2f304fdcba876bbd796f3238.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/f745418c2f304fdcba876bbd796f3238.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/f745418c2f304fdcba876bbd796f3238.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/f745418c2f304fdcba876bbd796f3238.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/f745418c2f304fdcba876bbd796f3238.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li><code>for((...;...;...)) do...done</code>语句
命令格式：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="k">for</span> <span class="p">((</span><span class="n">expression</span><span class="p">;</span> <span class="n">condition</span><span class="p">;</span> <span class="n">expression</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="n">内容</span>
</span></span><span class="line"><span class="cl"><span class="n">done</span></span></span></code></pre></td></tr></table>
</div>
</div><p>测试：输出1-10。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="k">for</span> <span class="p">((</span><span class="n">i</span><span class="p">=</span><span class="mf">0</span><span class="p">;</span> <span class="n">i</span><span class="p">&lt;=</span><span class="mf">10</span><span class="p">;</span> <span class="p">++</span><span class="n">i</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo </span><span class="nv">$i</span>
</span></span><span class="line"><span class="cl"><span class="n">done</span> </span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>while...do...done</code>语句
命令格式：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="k">while</span> <span class="n">条件</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span> 
</span></span><span class="line"><span class="cl">	<span class="n">内容</span>
</span></span><span class="line"><span class="cl"><span class="n">done</span></span></span></code></pre></td></tr></table>
</div>
</div><p>实例：文件结束符为<code>ctrl+d</code>，输入文件结束符后<code>read</code>指令返回false。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="k">while</span> <span class="n">reabashd</span> <span class="n">name</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo </span><span class="nv">$name</span>
</span></span><span class="line"><span class="cl"><span class="n">done</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/cc32a004a1fd44d98c969b23c5352947.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/cc32a004a1fd44d98c969b23c5352947.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/cc32a004a1fd44d98c969b23c5352947.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/cc32a004a1fd44d98c969b23c5352947.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/cc32a004a1fd44d98c969b23c5352947.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/cc32a004a1fd44d98c969b23c5352947.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li><code>unti...do..done</code>语句
和while语句相同，while能实现的脚本until同样可以实现。但区别是until循环的退出状态为0，与while刚好相反，即while循环在条件为真时继续执行循环而until在条件为假时继续执行循环。</li>
<li><code>break</code>语句</li>
<li>跳出当前的一层循环，break不能跳出case语句。</li>
<li><code>continue</code>语句
跳出当前循环。</li>
<li>死循环的处理方式
如果Terminal可以打开该程序，则输入<code>Ctrl+c</code>即可。否则可以直接关闭进程：使用<code>top</code>命令找到该进程的PID；输入<code>kill -9 PID</code>即可关掉此进程。</li>
</ul>
<h3 id="函数" class="heading-element"><span>2.11 函数</span>
  <a href="#%e5%87%bd%e6%95%b0" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>定义格式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="p">[</span> <span class="n">function</span> <span class="p">]</span> <span class="kd">function</span><span class="nb">_name</span> <span class="p">[()]{</span>
</span></span><span class="line"><span class="cl">	<span class="n">内容</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">[</span><span class="k">return</span> <span class="n">int</span><span class="p">;]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div><p>说明：</p>
<ol>
<li>可以带function func()定义，也可以直接fun()定义，不带任何参数。</li>
<li>参数返回，可以显示加：return返回，如果不加，将以最后一条命令运行结果作为返回值。<font color="red">return后跟数值n(0-255，不能超过该范围)。</font> 其中函数返回值通过<code>$?</code>获取。</li>
<li>函数体声明局部变量可以用local关键字声明。</li>
</ol>
<p>实例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="kd">function</span><span class="w"> </span><span class="nb">add</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo </span><span class="s2">&#34;相加预算函数&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo </span><span class="s2">&#34;请输入第一个数&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="n">read</span> <span class="n">a</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo </span><span class="s2">&#34;请输入第二个数&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="n">read</span> <span class="n">b</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="vm">$</span><span class="p">((</span><span class="nv">$a</span> <span class="p">+</span> <span class="nv">$b</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">add</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo </span><span class="s2">&#34;结果为$?&#34;</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9b6f76197a1b44419f1a4bcae1691843.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9b6f76197a1b44419f1a4bcae1691843.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9b6f76197a1b44419f1a4bcae1691843.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9b6f76197a1b44419f1a4bcae1691843.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9b6f76197a1b44419f1a4bcae1691843.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/9b6f76197a1b44419f1a4bcae1691843.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>函数参数
在shell中，调用函数可以向其传递参数。在函数体内部，通过<code>$n</code>的形式来获取参数的值。例如，<code>$1</code>表示第一个参数，<code>$2</code>表示第二个参数。这个规则和上文说的文件参数相同。也是在执行的后面添加参数。</li>
</ul>
<h3 id="exit命令" class="heading-element"><span>2.12 exit命令</span>
  <a href="#exit%e5%91%bd%e4%bb%a4" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p><code>exit</code>命令用来退出当前的shell进程，<font color="red">并返回一个退出状态（0-255，只有0表示成功，其他都表示失败）</font>；使用<code>$?</code>即可接收这个退出状态。
<code>exit</code>命令可以接收一个整数值作为参数，代表退出状态。如果不指定，默认值为0。</p>
<h3 id="文件重定向" class="heading-element"><span>2.13 文件重定向</span>
  <a href="#%e6%96%87%e4%bb%b6%e9%87%8d%e5%ae%9a%e5%90%91" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>每个进程默认打开3个文件描述符：</p>
<ul>
<li><code>stdin</code>：标准输入，从命令行读取数据，文件描述符为0。</li>
<li><code>stdout</code>：标准输出，向命令行输出数据，文件描述符为1。</li>
<li><code>stderr</code>：标准错误输出，向命令行输出数据，文件描述符为2。
可以用文件重定向将这三个文件重定向到其他文件中去。重定向命令列表如下：</li>
</ul>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>command &gt; file</code></td>
          <td>将输出重定向到 file。</td>
      </tr>
      <tr>
          <td><code>command &lt; file</code></td>
          <td>将输入重定向到 file。</td>
      </tr>
      <tr>
          <td><code>command &gt;&gt; file</code></td>
          <td>将输出以追加的方式重定向到 file。</td>
      </tr>
      <tr>
          <td><code>n &gt; file</code></td>
          <td>将文件描述符为 n 的文件重定向到 file。</td>
      </tr>
      <tr>
          <td><code>n &gt;&gt; file</code></td>
          <td>将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
      </tr>
      <tr>
          <td><code>n &gt;&amp; m</code></td>
          <td>将输出文件 m 和 n 合并。</td>
      </tr>
      <tr>
          <td><code>n &lt;&amp; m</code></td>
          <td>将输入文件 m 和 n 合并。</td>
      </tr>
      <tr>
          <td><code>&lt;&lt; tag</code></td>
          <td>将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
      </tr>
  </tbody>
</table>
<ul>
<li>输入输出重定向实例</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">echo </span><span class="n">-e</span> <span class="s2">&#34;Hello \c&#34;</span> <span class="p">&gt;</span> <span class="n">output</span><span class="p">.</span><span class="py">txt</span>  <span class="c"># 将stdout重定向到output.txt中</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo </span><span class="s2">&#34;World&#34;</span> <span class="p">&gt;&gt;</span> <span class="n">output</span><span class="p">.</span><span class="py">txt</span>  <span class="c"># 将字符串追加到output.txt中</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">read</span> <span class="n">str</span> <span class="p">&lt;</span> <span class="n">output</span><span class="p">.</span><span class="py">txt</span>  <span class="c"># 从output.txt中读取字符串</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo </span><span class="nv">$str</span>  <span class="c"># 输出结果：Hello World</span></span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7870860ada2d464898a64a5de76d5787.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7870860ada2d464898a64a5de76d5787.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7870860ada2d464898a64a5de76d5787.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7870860ada2d464898a64a5de76d5787.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7870860ada2d464898a64a5de76d5787.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/7870860ada2d464898a64a5de76d5787.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<ul>
<li>同时重定向stdin和stdout</li>
</ul>
<p>创建main.sh编写脚本：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">read</span> <span class="n">a</span>
</span></span><span class="line"><span class="cl"><span class="n">read</span> <span class="n">b</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo </span><span class="vm">$</span><span class="p">(</span><span class="n">expr</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2">&#34;</span> <span class="p">+</span> <span class="s2">&#34;</span><span class="nv">$b</span><span class="s2">&#34;</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div><p>创建input.txt，填写内容为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">10
</span></span><span class="line"><span class="cl">20</span></span></code></pre></td></tr></table>
</div>
</div><p>执行结果如下：
<a class="lightgallery" href="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/50d92d483c144e54a2589058d8401b5b.png?size=large" data-thumbnail="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/50d92d483c144e54a2589058d8401b5b.png?size=small" data-sub-html="<h2>在这里插入图片描述</h2>"><img loading="lazy" src="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/50d92d483c144e54a2589058d8401b5b.png" alt="在这里插入图片描述" srcset="https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/50d92d483c144e54a2589058d8401b5b.png?size=small, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/50d92d483c144e54a2589058d8401b5b.png?size=medium 1.5x, https://raw.githubusercontent.com/unique-pure/NewPicGoLibrary/main/img/50d92d483c144e54a2589058d8401b5b.png?size=large 2x" data-title="在这里插入图片描述" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></a></p>
<h3 id="引入外部脚本" class="heading-element"><span>2.14 引入外部脚本</span>
  <a href="#%e5%bc%95%e5%85%a5%e5%a4%96%e9%83%a8%e8%84%9a%e6%9c%ac" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>类似<code>C/C++</code>中的include操作，<code>bash</code>也可以引入其他文件中的代码。
语法格式为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="p">.</span> <span class="n">filename</span> <span class="c"># 注意空格</span>
</span></span><span class="line"><span class="cl"><span class="n">或者</span>
</span></span><span class="line"><span class="cl"><span class="n">source</span> <span class="n">filename</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="参考文献" class="heading-element"><span>3 参考文献</span>
  <a href="#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p><a href="https://www.acwing.com/activity/content/57/"target="_blank" rel="external nofollow noopener noreferrer">Linux基础课<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>
<a href="https://www.runoob.com/linux/linux-shell.html"target="_blank" rel="external nofollow noopener noreferrer">菜鸟教程<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></p>
]]></description></item></channel></rss>